function _spawnTestWithError(e,t,n){_spawnTest(!0,e,t,n)}function _spawnTestWithoutError(e,t,n){_spawnTest(!1,e,t,n)}function _spawnTest(e,t,n,r){var i,s=process.argv[0],o=[s,path.join(__dirname,t)].concat(n).join(" ");exec(o,function(n,i,s){if(e){if(n)return r(n);if(s.length>0)return r(s.toString())}return r(null,i.toString())})}function _testStat(e,t){assert.equal(e.uid,process.getuid(),"should have the same UID");assert.equal(e.gid,process.getgid(),"should have the same GUID");assert.equal(e.mode,t)}function _testPrefix(e){return function(n,r,i){assert.equal(path.basename(r).slice(0,e.length),e,"should have the provided prefix")}}function _testPostfix(e){return function(n,r,i){assert.equal(r.slice(r.length-e.length,r.length),e,"should have the provided postfix")}}function _testKeep(e,t,n){_spawnTestWithError("keep.js",[e,t],n)}function _testGraceful(e,t,n){_spawnTestWithoutError("graceful.js",[e,t],n)}function _assertName(e,t){assert.isString(t);assert.isNotZero(t.length)}function _testUnsafeCleanup(e,t){_spawnTestWithoutError("unsafe.js",["dir",e],t)}var assert=require("assert"),path=require("path"),exec=require("child_process").exec;module.exports.testStat=_testStat;module.exports.testPrefix=_testPrefix;module.exports.testPostfix=_testPostfix;module.exports.testKeep=_testKeep;module.exports.testGraceful=_testGraceful;module.exports.assertName=_assertName;module.exports.testUnsafeCleanup=_testUnsafeCleanup;