"use strict";var grunt=require("../../lib/grunt");exports.config={setUp:function(e){this.origData=grunt.config.data;grunt.config.init({meta:grunt.file.readJSON("test/fixtures/test.json"),foo:"<%= meta.foo %>",foo2:"<%= foo %>",obj:{foo:"<%= meta.foo %>",foo2:"<%= obj.foo %>",Arr:["foo","<%= obj.foo2 %>"],arr2:["<%= arr %>","<%= obj.Arr %>"]},bar:"bar",arr:["foo","<%= obj.foo2 %>"],arr2:["<%= arr %>","<%= obj.Arr %>"]});e()},tearDown:function(e){grunt.config.data=this.origData;e()},"config.escape":function(e){e.expect(2);e.equal(grunt.config.escape("foo"),"foo","Should do nothing if no . chars.");e.equal(grunt.config.escape("foo.bar.baz"),"foo\\.bar\\.baz","Should escape all . chars.");e.done()},"config.getPropString":function(e){e.expect(4);e.equal(grunt.config.getPropString("foo"),"foo","Should do nothing if already a string.");e.equal(grunt.config.getPropString("foo.bar.baz"),"foo.bar.baz","Should do nothing if already a string.");e.equal(grunt.config.getPropString(["foo","bar"]),"foo.bar","Should join parts into a dot-delimited string.");e.equal(grunt.config.getPropString(["foo.bar","baz.qux.zip"]),"foo\\.bar.baz\\.qux\\.zip","Should join parts into a dot-delimited string, escaping . chars in parts.");e.done()},"config.getRaw":function(e){e.expect(4);e.equal(grunt.config.getRaw("foo"),"<%= meta.foo %>","Should not process templates.");e.equal(grunt.config.getRaw("obj.foo2"),"<%= obj.foo %>","Should not process templates.");e.equal(grunt.config.getRaw(["obj","foo2"]),"<%= obj.foo %>","Should not process templates.");e.deepEqual(grunt.config.getRaw("arr"),["foo","<%= obj.foo2 %>"],"Should not process templates.");e.done()},"config.process":function(e){e.expect(5);e.equal(grunt.config.process("<%= meta.foo %>"),"bar","Should process templates.");e.equal(grunt.config.process("<%= foo %>"),"bar","Should process templates recursively.");e.equal(grunt.config.process("<%= obj.foo %>"),"bar","Should process deeply nested templates recursively.");e.deepEqual(grunt.config.process(["foo","<%= obj.foo2 %>"]),["foo","bar"],"Should process templates in arrays.");e.deepEqual(grunt.config.process(["<%= arr %>","<%= obj.Arr %>"]),[["foo","bar"],["foo","bar"]],"Should expand <%= arr %> and <%= obj.Arr %> values as objects if possible.");e.done()},"config.get":function(e){e.expect(8);e.equal(grunt.config.get("foo"),"bar","Should process templates.");e.equal(grunt.config.get("foo2"),"bar","Should process templates recursively.");e.equal(grunt.config.get("obj.foo2"),"bar","Should process deeply nested templates recursively.");e.equal(grunt.config.get(["obj","foo2"]),"bar","Should process deeply nested templates recursively.");e.deepEqual(grunt.config.get("arr"),["foo","bar"],"Should process templates in arrays.");e.deepEqual(grunt.config.get("obj.Arr"),["foo","bar"],"Should process templates in arrays.");e.deepEqual(grunt.config.get("arr2"),[["foo","bar"],["foo","bar"]],"Should expand <%= arr %> and <%= obj.Arr %> values as objects if possible.");e.deepEqual(grunt.config.get(["obj","arr2"]),[["foo","bar"],["foo","bar"]],"Should expand <%= arr %> and <%= obj.Arr %> values as objects if possible.");e.done()},"config.set":function(e){e.expect(6);e.equal(grunt.config.set("foo3","<%= foo2 %>"),"<%= foo2 %>","Should set values.");e.equal(grunt.config.getRaw("foo3"),"<%= foo2 %>","Should have set the value.");e.equal(grunt.config.data.foo3,"<%= foo2 %>","Should have set the value.");e.equal(grunt.config.set("a.b.c","<%= foo2 %>"),"<%= foo2 %>","Should create interim objects.");e.equal(grunt.config.getRaw("a.b.c"),"<%= foo2 %>","Should have set the value.");e.equal(grunt.config.data.a.b.c,"<%= foo2 %>","Should have set the value.");e.done()},config:function(e){e.expect(10);e.equal(grunt.config("foo"),"bar","Should retrieve processed data.");e.equal(grunt.config("obj.foo2"),"bar","Should retrieve processed data.");e.equal(grunt.config(["obj","foo2"]),"bar","Should retrieve processed data.");e.deepEqual(grunt.config("arr"),["foo","bar"],"Should process templates in arrays.");e.equal(grunt.config("foo3","<%= foo2 %>"),"<%= foo2 %>","Should set values.");e.equal(grunt.config.getRaw("foo3"),"<%= foo2 %>","Should have set the value.");e.equal(grunt.config.data.foo3,"<%= foo2 %>","Should have set the value.");e.equal(grunt.config("a.b.c","<%= foo2 %>"),"<%= foo2 %>","Should create interim objects.");e.equal(grunt.config.getRaw("a.b.c"),"<%= foo2 %>","Should have set the value.");e.equal(grunt.config.data.a.b.c,"<%= foo2 %>","Should have set the value.");e.done()},"config.requires":function(e){e.expect(8);grunt.log.muted=!0;e.doesNotThrow(function(){grunt.config.requires("foo")},"This property exists.");e.doesNotThrow(function(){grunt.config.requires("obj.foo")},"This property exists.");e.doesNotThrow(function(){grunt.config.requires("foo","obj.foo","obj.foo2")},"These properties exist.");e.doesNotThrow(function(){grunt.config.requires("foo",["obj","foo"],["obj","foo2"])},"These properties exist.");e.throws(function(){grunt.config.requires("xyz")},"This property does not exist.");e.throws(function(){grunt.config.requires("obj.xyz")},"This property does not exist.");e.throws(function(){grunt.config.requires("foo","obj.foo","obj.xyz")},"One property does not exist.");e.throws(function(){grunt.config.requires("foo",["obj","foo"],["obj","xyz"])},"One property does not exist.");grunt.log.muted=!1;e.done()}};