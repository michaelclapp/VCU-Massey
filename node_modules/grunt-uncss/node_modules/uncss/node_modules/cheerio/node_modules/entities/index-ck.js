function getReplacer(e){var t=Object.keys(e).sort(),n=t.join("|").replace(/(\w+)\|\1;/g,"$1;?");n+="|#[xX][\\da-fA-F]+;?|#\\d+;?";return genReplaceFunc(new RegExp("&(?:"+n+")","g"),function(n){return n.charAt(1)==="#"?n.charAt(2).toLowerCase()==="x"?String.fromCharCode(parseInt(n.substr(3),16)):String.fromCharCode(parseInt(n.substr(2),10)):e[n.substr(1)]})}function getStrictReplacer(e){function i(t){return t.charAt(1)==="#"?t.charAt(2).toLowerCase()==="x"?String.fromCharCode(parseInt(t.substr(3),16)):String.fromCharCode(parseInt(t.substr(2),10)):e[t.substr(1)]}var t=Object.keys(e).sort().filter(RegExp.prototype.test,/;$/),n=t.map(function(e){return e.slice(0,-1)}).join("|");n+="|#[xX][\\da-fA-F]+|#\\d+";var r=new RegExp("&(?:"+n+");","g");return genReplaceFunc(r,i)}function nonUTF8Replacer(e){return"&#"+e.charCodeAt(0)+";"}function getReverse(e){function r(e){return"&"+t[e]}var t=Object.keys(e).filter(function(t){return t.substr(-1)===";"||e[t+";"]!==e[t]}).reduce(function(t,n){t[e[n]]=n;return t},{}),n=new RegExp("\\"+Object.keys(t).sort().join("|\\"),"g");return function(e){return e.replace(n,r).replace(re_nonUTF8,nonUTF8Replacer)}}function genReplaceFunc(e,t){return function(n){return n.replace(e,t)}}var modes=["XML","HTML4","HTML5"];module.exports={decode:function(e,t){modes[t]||(t=0);return module.exports["decode"+modes[t]](e)},decodeStrict:function(e,t){modes[t]||(t=0);return module.exports["decode"+modes[t]+"Strict"](e)},encode:function(e,t){modes[t]||(t=0);return module.exports["encode"+modes[t]](e)}};modes.reduce(function(e,t){var n=require("./entities/"+t.toLowerCase()+".json");e&&Object.keys(e).forEach(function(t){n[t]=e[t]});module.exports["decode"+t+"Strict"]=getStrictReplacer(n);t==="XML"?module.exports.decodeXML=module.exports.decodeXMLStrict:module.exports["decode"+t]=getReplacer(n);module.exports["encode"+t]=getReverse(n);return n},null);var re_nonUTF8=/[\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]/g;