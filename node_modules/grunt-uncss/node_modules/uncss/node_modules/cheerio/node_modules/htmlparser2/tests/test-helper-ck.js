var htmlparser=require(".."),Parser=htmlparser.Parser,CollectingHandler=htmlparser.CollectingHandler,chunkSize=5;exports.writeToParser=function(e,t,n){var r=new Parser(e,t);for(var i=0;i<n.length;i+=chunkSize)r.write(n.substr(i,chunkSize));r.end();r.parseComplete(n)};exports.getEventCollector=function(e){var t=new CollectingHandler({onerror:e,onend:function(){e(null,t.events.reduce(function(e,t){t[0]!=="onerror"&&t[0]!=="onend"&&(t[0]==="ontext"&&e.length&&e[e.length-1].event==="text"?e[e.length-1].data[0]+=t[1]:e.push({event:t[0].slice(2),data:t.slice(1)}));return e},[]))}});return t};