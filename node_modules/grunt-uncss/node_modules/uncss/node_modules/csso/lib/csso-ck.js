function getOpts(e,t,n){var r={single:[],pairs:{},other:[]},i,s=0;for(;s<e.length;){i=e[s];t&&t.indexOf(i)!==-1&&(!n||n.indexOf(i)===-1)?r.single.push(i):n&&n.indexOf(i)!==-1&&(!t||t.indexOf(i)===-1)?r.pairs[i]=e[++s]:r.other.push(i);s++}r.single.contains=function(e){if(typeof e=="string")return this.indexOf(e)!==-1;for(var t=0;t<e.length;t++)if(this.indexOf(e[t])!==-1)return!0;return!1};return r}function printFile(e){print(fs.readFileSync(__dirname.slice(0,__dirname.lastIndexOf("/"))+"/"+e).toString())}var fs=require("fs"),print=require("util").print,csso=require("./cssoapi.js"),src,x,args=process.argv.slice(2),opts=args.length?getOpts(args,["-v","--version","-h","--help","-dp","--parser","-off","--restructure-off"],["-r","--rule","-i","--input","-o","--output"]):null,single=opts&&opts.single,pairs=opts&&opts.pairs,other=opts&&opts.other,ro=single&&single.contains(["-off","--restructure-off"]),inFile=pairs&&(pairs["-i"]||pairs["--input"])||other&&other[0],outFile=pairs&&(pairs["-o"]||pairs["--output"])||other&&other[1],rule=pairs&&(pairs["-r"]||pairs["--rule"])||"stylesheet";if(single&&single.contains(["-v","--version"]))printFile("VERSION");else if(!inFile||!opts||single&&single.contains(["-h","--help"])||other.length>2)printFile("USAGE");else{src=fs.readFileSync(inFile).toString().trim();single.contains(["-dp","--parser"])?csso.printTree(csso.cleanInfo(csso.parse(src,rule,!0))):outFile?fs.writeFileSync(outFile,csso.justDoIt(src,ro,!0)):print(csso.justDoIt(src,ro,!0))};