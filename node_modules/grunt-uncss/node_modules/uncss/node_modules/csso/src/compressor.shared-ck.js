function CSSOCompressor(){}CSSOCompressor.prototype.init=function(){this.props={};this.shorts={};this.shorts2={};this.ccrules={};this.crules={};this.prules={};this.frrules={};this.msrules={};this.csrules={};this.rbrules={};this.rjrules={};this.rrrules={};this.frules={};this.initRules(this.crules,this.defCCfg);this.initRules(this.ccrules,this.cleanCfg);this.initRules(this.frrules,this.frCfg);this.initRules(this.prules,this.preCfg);this.initRules(this.msrules,this.msCfg);this.initRules(this.csrules,this.csCfg);this.initRules(this.rbrules,this.defRBCfg);this.initRules(this.rjrules,this.defRJCfg);this.initRules(this.rrrules,this.defRRCfg);this.initRules(this.frules,this.defFCfg);this.shortGroupID=0;this.lastShortGroupID=0;this.lastShortSelector=0};CSSOCompressor.prototype.initRules=function(e,t){var n=this.order,r=this.profile,i,s,o,u=[];for(s=0;s<n.length;s++)n[s]in t&&u.push(n[s]);u.length||(u=n);for(s=0;s<u.length;s++){i=r[u[s]];for(o in i)e[o]?e[o].push(u[s]):e[o]=[u[s]]}};CSSOCompressor.prototype.cleanCfg={cleanComment:1};CSSOCompressor.prototype.defCCfg={cleanCharset:1,cleanImport:1,cleanWhitespace:1,cleanDecldelim:1,compressNumber:1,cleanUnary:1,compressColor:1,compressDimension:1,compressString:1,compressFontWeight:1,compressFont:1,compressBackground:1,cleanEmpty:1};CSSOCompressor.prototype.defRBCfg={restructureBlock:1};CSSOCompressor.prototype.defRJCfg={rejoinRuleset:1,cleanEmpty:1};CSSOCompressor.prototype.defRRCfg={restructureRuleset:1,cleanEmpty:1};CSSOCompressor.prototype.defFCfg={cleanEmpty:1,delimSelectors:1,delimBlocks:1};CSSOCompressor.prototype.preCfg={destroyDelims:1,preTranslate:1};CSSOCompressor.prototype.msCfg={markShorthands:1};CSSOCompressor.prototype.frCfg={freezeRulesets:1};CSSOCompressor.prototype.csCfg={cleanShorthands:1,cleanEmpty:1};CSSOCompressor.prototype.order=["cleanCharset","cleanImport","cleanComment","cleanWhitespace","compressNumber","cleanUnary","compressColor","compressDimension","compressString","compressFontWeight","compressFont","compressBackground","freezeRulesets","destroyDelims","preTranslate","markShorthands","cleanShorthands","restructureBlock","rejoinRuleset","restructureRuleset","cleanEmpty","delimSelectors","delimBlocks"];CSSOCompressor.prototype.profile={cleanCharset:{atrules:1},cleanImport:{atrules:1},cleanWhitespace:{s:1},compressNumber:{number:1},cleanUnary:{unary:1},compressColor:{vhash:1,funktion:1,ident:1},compressDimension:{dimension:1},compressString:{string:1},compressFontWeight:{declaration:1},compressFont:{declaration:1},compressBackground:{declaration:1},cleanComment:{comment:1},cleanDecldelim:{block:1},cleanEmpty:{ruleset:1,atruleb:1,atruler:1},destroyDelims:{decldelim:1,delim:1},preTranslate:{declaration:1,property:1,simpleselector:1,filter:1,value:1,number:1,percentage:1,dimension:1,ident:1},restructureBlock:{block:1},rejoinRuleset:{ruleset:1},restructureRuleset:{ruleset:1},delimSelectors:{selector:1},delimBlocks:{block:1},markShorthands:{block:1},cleanShorthands:{declaration:1},freezeRulesets:{ruleset:1}};CSSOCompressor.prototype.isContainer=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return!0};CSSOCompressor.prototype.process=function(e,t,n,r,i){var s=t[1];if(s&&e[s]){var o=e[s],u=t,a,f=this.order,l;for(var l=0;l<o.length;l++){a=this[o[l]](u,s,n,r,i);if(a===null)return null;a!==undefined&&(u=a)}}return u};CSSOCompressor.prototype.compress=function(e,t){e=e||["stylesheet"];this.init();this.info=!0;var n=typeof e[0]!="string"?e:this.injectInfo([e])[0],r,i=1e11,s,o,u,a,f=this.findProtectedComment(e);n=this.walk(this.ccrules,n,"/0");n=this.walk(this.crules,n,"/0");n=this.walk(this.prules,n,"/0");n=this.walk(this.frrules,n,"/0");s=translator.translate(cleanInfo(n)).length;if(!t){a=this.copyArray(n);n=this.walk(this.rjrules,n,"/0");this.disjoin(n);n=this.walk(this.msrules,n,"/0");n=this.walk(this.csrules,n,"/0");n=this.walk(this.rbrules,n,"/0");do{r=i;o=this.copyArray(n);n=this.walk(this.rjrules,n,"/0");n=this.walk(this.rrrules,n,"/0");i=translator.translate(cleanInfo(n)).length;u=this.copyArray(n)}while(r>i);s<r&&s<i?n=a:r<i&&(n=o)}n=this.walk(this.frules,n,"/0");f&&n.splice(2,0,f);return n};CSSOCompressor.prototype.findProtectedComment=function(e){var t;for(var n=2;n<e.length;n++){t=e[n];if(t[1]==="comment"&&t[2].length>0&&t[2].charAt(0)==="!")return t;if(t[1]!=="s")return}};CSSOCompressor.prototype.injectInfo=function(e){var t;for(var n=e.length-1;n>-1;n--){t=e[n];if(t&&Array.isArray(t)){this.isContainer(t)&&(t=this.injectInfo(t));t.splice(0,0,{})}}return e};CSSOCompressor.prototype.disjoin=function(e){var t,n,r,i;for(var s=e.length-1;s>-1;s--){t=e[s];if(t&&Array.isArray(t)&&t[1]==="ruleset"){t[0].shortGroupID=this.shortGroupID++;n=t[2];if(n.length>3){i=n.slice(0,2);for(var o=n.length-1;o>1;o--){r=this.copyArray(t);r[2]=i.concat([n[o]]);r[2][0].s=n[o][0].s;e.splice(s+1,0,r)}e.splice(s,1)}}this.isContainer(t)&&this.disjoin(t)}};CSSOCompressor.prototype.walk=function(e,t,n){var r,i;for(var s=t.length-1;s>-1;s--){r=t[s];if(r&&Array.isArray(r)){r[0].parent=t;this.isContainer(r)&&(r=this.walk(e,r,n+"/"+s));r===null?t.splice(s,1):(i=this.process(e,r,t,s,n))?t[s]=i:i===null&&t.splice(s,1)}}return t.length?t:null};CSSOCompressor.prototype.freezeRulesets=function(e,t,n,r){var i=e[0],s=e[2];i.freeze=this.freezeNeeded(s);i.freezeID=this.selectorSignature(s);i.pseudoID=this.composePseudoID(s);i.pseudoSignature=this.pseudoSelectorSignature(s,this.allowedPClasses,!0);this.markSimplePseudo(s);return e};CSSOCompressor.prototype.markSimplePseudo=function(e){var t,n={};for(var r=2;r<e.length;r++){t=e[r];t[0].pseudo=this.containsPseudo(t);t[0].sg=n;n[t[0].s]=1}};CSSOCompressor.prototype.composePseudoID=function(e){var t=[],n;for(var r=2;r<e.length;r++){n=e[r];this.containsPseudo(n)&&t.push(n[0].s)}t.sort();return t.join(",")};CSSOCompressor.prototype.containsPseudo=function(e){for(var t=2;t<e.length;t++)switch(e[t][1]){case"pseudoc":case"pseudoe":case"nthselector":if(!(e[t][2][2]in this.notFPClasses))return!0}};CSSOCompressor.prototype.selectorSignature=function(e){var t=[];for(var n=2;n<e.length;n++)t.push(translator.translate(cleanInfo(e[n])));t.sort();return t.join(",")};CSSOCompressor.prototype.pseudoSelectorSignature=function(e,t,n){var r=[],i={},s,o=!1;t=t||{};for(var u=2;u<e.length;u++){s=e[u];for(var a=2;a<s.length;a++)switch(s[a][1]){case"pseudoc":case"pseudoe":case"nthselector":s[a][2][2]in t?o=!0:i[s[a][2][2]]=1}}for(var f in i)r.push(f);r.sort();return r.join(",")+(n?"":o)};CSSOCompressor.prototype.notFPClasses={link:1,visited:1,hover:1,active:1,"first-letter":1,"first-line":1};CSSOCompressor.prototype.notFPElements={"first-letter":1,"first-line":1};CSSOCompressor.prototype.freezeNeeded=function(e){var t;for(var n=2;n<e.length;n++){t=e[n];for(var r=2;r<t.length;r++)switch(t[r][1]){case"pseudoc":if(!(t[r][2][2]in this.notFPClasses))return!0;break;case"pseudoe":if(!(t[r][2][2]in this.notFPElements))return!0;break;case"nthselector":return!0}}return!1};CSSOCompressor.prototype.cleanCharset=function(e,t,n,r){if(e[2][2][2]==="charset")for(r-=1;r>1;r--)if(n[r][1]!=="s"&&n[r][1]!=="comment")return null};CSSOCompressor.prototype.cleanImport=function(e,t,n,r){var i;for(r-=1;r>1;r--){i=n[r][1];if(i!=="s"&&i!=="comment"){if(i!=="atrules")return null;i=n[r][2][2][2];if(i!=="import"&&i!=="charset")return null}}};CSSOCompressor.prototype.cleanComment=function(e,t,n,r){var i=n[1]==="braces"&&r===4||n[1]!=="braces"&&r===2?null:n[r-1][1],s=r===n.length-1?null:n[r+1][1];if(s===null||i===null)return null;if(this._cleanComment(s)||this._cleanComment(i))return null};CSSOCompressor.prototype._cleanComment=function(e){switch(e){case"s":case"operator":case"attrselector":case"block":case"decldelim":case"ruleset":case"declaration":case"atruleb":case"atrules":case"atruler":case"important":case"nth":case"combinator":return!0}};CSSOCompressor.prototype.nextToken=function(e,t,n,r){var i,s;for(;n<e.length;n++){i=e[n];if(Array.isArray(i)){s=i[1];if(s===t)return i;if(r&&s!=="s")return}}};CSSOCompressor.prototype.cleanWhitespace=function(e,t,n,r){var i=n[1]==="braces"&&r===4||n[1]!=="braces"&&r===2?null:n[r-1][1],s=r===n.length-1?null:n[r+1][1];if(s==="unknown")e[2]="\n";else{if((n[1]!=="atrulerq"||!!i)&&!this.issue16(n,r)){if(s===null||i===null)return null;if(this._cleanWhitespace(s,!1)||this._cleanWhitespace(i,!0))return null}e[2]=" "}return e};CSSOCompressor.prototype.issue16=function(e,t){return t!==2&&t!==e.length-1&&e[t-1][1]==="uri"};CSSOCompressor.prototype._cleanWhitespace=function(e,t){switch(e){case"s":case"operator":case"attrselector":case"block":case"decldelim":case"ruleset":case"declaration":case"atruleb":case"atrules":case"atruler":case"important":case"nth":case"combinator":return!0}if(t)switch(e){case"funktion":case"braces":case"uri":return!0}};CSSOCompressor.prototype.cleanDecldelim=function(e){for(var t=e.length-1;t>1;t--)e[t][1]==="decldelim"&&e[t+1][1]!=="declaration"&&e.splice(t,1);e[2][1]==="decldelim"&&e.splice(2,1);return e};CSSOCompressor.prototype.compressNumber=function(e,t,n,r){var i=e[2];/^0*/.test(i)&&(i=i.replace(/^0+/,""));/\.0*$/.test(i)&&(i=i.replace(/\.0*$/,""));/\..*[1-9]+0+$/.test(i)&&(i=i.replace(/0+$/,""));if(i==="."||i==="")i="0";e[2]=i;e[0].s=i;return e};CSSOCompressor.prototype.findDeclaration=function(e){var t=e;while((t=t[0].parent)&&t[1]!=="declaration");return t};CSSOCompressor.prototype.cleanUnary=function(e,t,n,r){var i=n[r+1];return i&&i[1]==="number"&&i[2]==="0"?null:e};CSSOCompressor.prototype.compressColor=function(e,t,n,r){switch(t){case"vhash":return this.compressHashColor(e);case"funktion":return this.compressFunctionColor(e);case"ident":return this.compressIdentColor(e,t,n,r)}};CSSOCompressor.prototype.compressIdentColor=function(e,t,n){var r={yellow:"ff0",fuchsia:"f0f",white:"fff",black:"000",blue:"00f",aqua:"0ff"},i={value:1,functionBody:1},s=e[2].toLowerCase();if(n[1]in i&&s in r)return[{},"vhash",r[s]]};CSSOCompressor.prototype.compressHashColor=function(e){return this._compressHashColor(e[2],e[0])};CSSOCompressor.prototype._compressHashColor=function(e,t){var n={f00:"red",c0c0c0:"silver",808080:"gray",8e5:"maroon",800080:"purple","008000":"green",808e3:"olive","000080":"navy","008080":"teal"},r=e;e=e.toLowerCase();e.length===6&&e.charAt(0)===e.charAt(1)&&e.charAt(2)===e.charAt(3)&&e.charAt(4)===e.charAt(5)&&(e=e.charAt(0)+e.charAt(2)+e.charAt(4));return n[e]?[t,"string",n[e]]:[t,"vhash",e.length<r.length?e:r]};CSSOCompressor.prototype.compressFunctionColor=function(e){var t,n=[],r,i="",s;if(e[2][2]==="rgb"){s=e[3];for(t=2;t<s.length;t++){r=s[t][1];if(r==="number")n.push(s[t]);else if(r!=="operator"){n=[];break}}if(n.length===3){i+=(r=Number(n[0][2]).toString(16)).length===1?"0"+r:r;i+=(r=Number(n[1][2]).toString(16)).length===1?"0"+r:r;i+=(r=Number(n[2][2]).toString(16)).length===1?"0"+r:r;if(i.length===6)return this._compressHashColor(i,{})}}};CSSOCompressor.prototype.compressDimension=function(e){var t;if(e[2][2]==="0"){if(e[3][2]==="s"&&(t=this.findDeclaration(e))){var n=t[2][2][2];if(n==="-moz-transition")return;if(n==="-moz-animation"||n==="animation")return}return e[2]}};CSSOCompressor.prototype.compressString=function(e,t,n){var r=e[2],i="",s;for(var o=0;o<r.length;o++){s=r.charAt(o);s==="\\"&&r.charAt(o+1)==="\n"?o++:i+=s}if(r.length!==i.length)return[{},"string",i]};CSSOCompressor.prototype.compressFontWeight=function(e){var t=e[2],n=e[3];if(t[2][2].indexOf("font-weight")!==-1&&n[2][1]==="ident"){n[2][2]==="normal"?n[2]=[{},"number","400"]:n[2][2]==="bold"&&(n[2]=[{},"number","700"]);return e}};CSSOCompressor.prototype.compressFont=function(e){var t=e[2],n=e[3],r,i,s;if(/font$/.test(t[2][2])&&n.length){n.splice(2,0,[{},"s",""]);for(r=n.length-1;r>2;r--){i=n[r];if(i[1]==="ident"){i=i[2];if(i==="bold")n[r]=[{},"number","700"];else if(i==="normal"){s=n[r-1];s[1]==="operator"&&s[2]==="/"?n.splice(--r,2):n.splice(r,1);n[r-1][1]==="s"&&n.splice(--r,1)}else if(i==="medium"&&n[r+1]&&n[r+1][2]!=="/"){n.splice(r,1);n[r-1][1]==="s"&&n.splice(--r,1)}}}n.length>2&&n[2][1]==="s"&&n.splice(2,1);n.length===2&&n.push([{},"ident","normal"]);return e}};CSSOCompressor.prototype.compressBackground=function(e){var t=e[2],n=e[3],r,i,s,o=n[n.length-1][1]==="important"?3:2;if(/background$/.test(t[2][2])&&n.length){n.splice(2,0,[{},"s",""]);for(r=n.length-1;r>o;r--){i=n[r];if(i[1]==="ident"){i=i[2];if(i==="transparent"||i==="none"||i==="repeat"||i==="scroll"){n.splice(r,1);n[r-1][1]==="s"&&n.splice(--r,1)}}}n.length>2&&n[2][1]==="s"&&n.splice(2,1);n.length===2&&n.splice(2,0,[{},"number","0"],[{},"s"," "],[{},"number","0"]);return e}};CSSOCompressor.prototype.cleanEmpty=function(e,t){switch(t){case"ruleset":if(e[3].length===2)return null;break;case"atruleb":if(e[e.length-1].length<3)return null;break;case"atruler":if(e[4].length<3)return null}};CSSOCompressor.prototype.destroyDelims=function(){return null};CSSOCompressor.prototype.preTranslate=function(e){e[0].s=translator.translate(cleanInfo(e));return e};CSSOCompressor.prototype.markShorthands=function(e,t,n,r,i){if(n[1]==="ruleset")var s=n[2][2][0].s,o=n[0].freeze,u=n[0].freezeID;else var s="",o=!1,u="fake";var a,f,l,c,h,p,d,v=this.pathUp(i)+"/"+(o?"&"+u+"&":"")+s+"/",m,g,y=n[0].shortGroupID;for(var b=e.length-1;b>-1;b--){m=!0;a=e[b];if(a[1]==="declaration"){l=a[3];c=l[l.length-1][1]==="important";f=a[2][0].s;a[0].id=i+"/"+b;if(f in TRBL.props){p=v+TRBL.extractMain(f);var w=this.shorts2[p]||[];g=w.length===0?0:w.length-1;if(!this.lastShortSelector||s===this.lastShortSelector||y===this.lastShortGroupID)if(w.length){d=w[g];m=!1}if(m){a[0].replaceByShort=!0;a[0].shorthandKey={key:p,i:g};d=new TRBL(f,c);w.push(d)}if(!d.invalid){a[0].removeByShort=!0;a[0].shorthandKey={key:p,i:g};d.add(f,l[0].s,l.slice(2),c)}this.shorts2[p]=w;this.lastShortSelector=s;this.lastShortGroupID=y}}}return e};CSSOCompressor.prototype.cleanShorthands=function(e){if(e[0].removeByShort||e[0].replaceByShort){var t,n,r=e[0].shorthandKey;t=this.shorts2[r.key][r.i];if(!t.invalid&&t.isOkToMinimize()){if(e[0].replaceByShort){n=[{},"declaration",t.getProperty(),t.getValue()];n[0].s=translator.translate(cleanInfo(n));return n}return null}}};CSSOCompressor.prototype.dontRestructure={src:1,clip:1,display:1};CSSOCompressor.prototype.restructureBlock=function(e,t,n,r,i){if(n[1]==="ruleset")var s=this.props,o=n[2][2][0].pseudo,u=n[2][2][0].s,a=n[0].freeze,f=n[0].freezeID,l=n[0].pseudoID,c=n[2][2][0].sg;else var s={},o=!1,u="",a=!1,f="fake",l="fake",c={};var h,p,d,v,m,g=this.pathUp(i)+"/"+u+"/",y;for(var b=e.length-1;b>-1;b--){h=e[b];if(h[1]==="declaration"){d=h[3];v=d[d.length-1][1]==="important";p=h[2][0].s;y=this.buildPPre(g,p,d,h,a);h[0].id=i+"/"+b;if(!this.dontRestructure[p]&&(m=s[y])){if(o&&f===m.freezeID||!o&&l===m.pseudoID||o&&l===m.pseudoID&&this.hashInHash(c,m.sg))if(v&&!m.imp){s[y]={block:e,imp:v,id:h[0].id,sg:c,freeze:a,path:i,freezeID:f,pseudoID:l};this.deleteProperty(m.block,m.id)}else e.splice(b,1)}else this.needless(p,s,g,v,d,h,a)?e.splice(b,1):s[y]={block:e,imp:v,id:h[0].id,sg:c,freeze:a,path:i,freezeID:f,pseudoID:l}}}return e};CSSOCompressor.prototype.buildPPre=function(e,t,n,r,i){var s=i?"ft:":"ff:";if(t.indexOf("background")!==-1)return s+e+r[0].s;var o=n.slice(2),u=[0,0,0,0],a="";for(var f=0;f<o.length;f++){a||(a=this.getVendorIDFromToken(o[f]));switch(o[f][1]){case"vhash":case"ident":u[0]=1;break;case"funktion":switch(o[f][2][2]){case"rgb":u[0]=1;break;case"hsl":u[1]=1;break;case"hsla":u[2]=1;break;case"rgba":u[3]=1}}}return s+e+t+u.join("")+(a?a:"")};CSSOCompressor.prototype.vendorID={"-o-":"o","-moz-":"m","-webkit-":"w","-ms-":"i","-epub-":"e","-apple-":"a","-xv-":"x","-wap-":"p"};CSSOCompressor.prototype.getVendorIDFromToken=function(e){var t;switch(e[1]){case"ident":if(t=this.getVendorFromString(e[2]))return this.vendorID[t];break;case"funktion":if(t=this.getVendorFromString(e[2][2]))return this.vendorID[t]}};CSSOCompressor.prototype.getVendorFromString=function(e){var t=e.charAt(0),n;return t==="-"&&(n=e.indexOf("-",2))!==-1?e.substr(0,n+1):""};CSSOCompressor.prototype.deleteProperty=function(e,t){var n;for(var r=e.length-1;r>1;r--){n=e[r];if(Array.isArray(n)&&n[1]==="declaration"&&n[0].id===t){e.splice(r,1);return}}};CSSOCompressor.prototype.nlTable={"border-width":["border"],"border-style":["border"],"border-color":["border"],"border-top":["border"],"border-right":["border"],"border-bottom":["border"],"border-left":["border"],"border-top-width":["border-top","border-width","border"],"border-right-width":["border-right","border-width","border"],"border-bottom-width":["border-bottom","border-width","border"],"border-left-width":["border-left","border-width","border"],"border-top-style":["border-top","border-style","border"],"border-right-style":["border-right","border-style","border"],"border-bottom-style":["border-bottom","border-style","border"],"border-left-style":["border-left","border-style","border"],"border-top-color":["border-top","border-color","border"],"border-right-color":["border-right","border-color","border"],"border-bottom-color":["border-bottom","border-color","border"],"border-left-color":["border-left","border-color","border"],"margin-top":["margin"],"margin-right":["margin"],"margin-bottom":["margin"],"margin-left":["margin"],"padding-top":["padding"],"padding-right":["padding"],"padding-bottom":["padding"],"padding-left":["padding"],"font-style":["font"],"font-variant":["font"],"font-weight":["font"],"font-size":["font"],"font-family":["font"],"list-style-type":["list-style"],"list-style-position":["list-style"],"list-style-image":["list-style"]};CSSOCompressor.prototype.needless=function(e,t,n,r,i,s,o){var u=e.charAt(0);if(u==="*"||u==="_"||u==="$")e=e.substr(1);else if(u==="/"&&e.charAt(1)==="/"){u="//";e=e.substr(2)}else u="";var a=this.getVendorFromString(e),f=e.substr(a.length),l,c,h;if(f in this.nlTable){l=this.nlTable[f];for(var p=0;p<l.length;p++){h=this.buildPPre(n,u+a+l[p],i,s,o);if(c=t[h])return!r||c.imp}}};CSSOCompressor.prototype.rejoinRuleset=function(e,t,n,r){var i=r===2||n[r-1][1]==="unknown"?null:n[r-1],s=i?i[2].slice(2):[],o=i?i[3].slice(2):[],u=e[2].slice(2),a=e[3].slice(2),f,l,c;if(!a.length)return null;if(s.length&&o.length&&e[0].pseudoSignature==i[0].pseudoSignature){if(e[1]!==i[1])return;f=this.getHash(s);l=this.getHash(u);if(this.equalHash(l,f)){i[3]=i[3].concat(e[3].splice(2));return null}if(this.okToJoinByProperties(e,i)){c=this.analyze(e,i);if(!c.ne1.length&&!c.ne2.length){i[2]=this.cleanSelector(i[2].concat(e[2].splice(2)));i[2][0].s=translator.translate(cleanInfo(i[2]));return null}}}};CSSOCompressor.prototype.okToJoinByProperties=function(e,t){var n=e[0],r=t[0];return n.freezeID===r.freezeID?!0:n.pseudoID===r.pseudoID?!0:n.freeze&&r.freeze?this.pseudoSelectorSignature(e[2],this.allowedPClasses)===this.pseudoSelectorSignature(t[2],this.allowedPClasses):!n.freeze&&!r.freeze};CSSOCompressor.prototype.allowedPClasses={after:1,before:1};CSSOCompressor.prototype.containsOnlyAllowedPClasses=function(e){var t;for(var n=2;n<e.length;n++){t=e[n];for(var r=2;r<t.length;r++)if(t[r][1]=="pseudoc"||t[r][1]=="pseudoe")if(!(t[r][2][2]in this.allowedPClasses))return!1}return!0};CSSOCompressor.prototype.restructureRuleset=function(e,t,n,r){var i=r===2||n[r-1][1]==="unknown"?null:n[r-1],s=i?i[2].slice(2):[],o=i?i[3].slice(2):[],u=e[3].slice(2),a,f;if(!u.length)return null;if(s.length&&o.length&&e[0].pseudoSignature==i[0].pseudoSignature){if(e[1]!==i[1])return;a=this.analyze(e,i);if(a.eq.length&&(a.ne1.length||a.ne2.length))if(a.ne1.length&&!a.ne2.length){var l=e[2].slice(2),c=translator.translate(cleanInfo(e[2])),h=c.length+l.length-1,p=this.calcLength(a.eq)+a.eq.length-1;if(h<p){i[2]=this.cleanSelector(i[2].concat(e[2].slice(2)));e[3].splice(2);e[3]=e[3].concat(a.ne1);return e}}else if(a.ne2.length&&!a.ne1.length){var l=i[2].slice(2),c=translator.translate(cleanInfo(i[2])),h=c.length+l.length-1,p=this.calcLength(a.eq)+a.eq.length-1;if(h<p){e[2]=this.cleanSelector(i[2].concat(e[2].slice(2)));i[3].splice(2);i[3]=i[3].concat(a.ne2);return e}}else{var l=this.cleanSelector(i[2].concat(e[2].slice(2))),c=translator.translate(cleanInfo(l)),d=c.length+l.length-1+2,p=this.calcLength(a.eq)+a.eq.length-1;if(p>=d){l[0].s=c;f=[{f:0,l:0},"ruleset",l,[{f:0,l:0},"block"].concat(a.eq)];e[3].splice(2);e[3]=e[3].concat(a.ne1);i[3].splice(2);i[3]=i[3].concat(a.ne2);n.splice(r,0,f);return f}}}};CSSOCompressor.prototype.calcLength=function(e){var t=0;for(var n=0;n<e.length;n++)t+=e[n][0].s.length;return t};CSSOCompressor.prototype.cleanSelector=function(e){if(e.length===2)return null;var t={},n;for(var r=2;r<e.length;r++){n=e[r][0].s;n in t?(e.splice(r,1),r--):t[n]=1}return e};CSSOCompressor.prototype.analyze=function(e,t){var n={eq:[],ne1:[],ne2:[]};if(e[1]!==t[1])return n;var r=e[3],i=t[3],s=r.slice(2),o=i.slice(2),u,a,f,l;u=this.getHash(s);a=this.getHash(o);for(f=0;f<s.length;f++){l=s[f];l[0].s in a?n.eq.push(l):n.ne1.push(l)}for(f=0;f<o.length;f++){l=o[f];l[0].s in u||n.ne2.push(l)}return n};CSSOCompressor.prototype.equalHash=function(e,t){var n;for(n in e)if(!(n in t))return!1;for(n in t)if(!(n in e))return!1;return!0};CSSOCompressor.prototype.getHash=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n][0].s]=1;return t};CSSOCompressor.prototype.hashInHash=function(e,t){for(var n in e)if(!(n in t))return!1;return!0};CSSOCompressor.prototype.delimSelectors=function(e){for(var t=e.length-1;t>2;t--)e.splice(t,0,[{},"delim"])};CSSOCompressor.prototype.delimBlocks=function(e){for(var t=e.length-1;t>2;t--)e.splice(t,0,[{},"decldelim"])};CSSOCompressor.prototype.copyArray=function(e){var t=[],n;for(var r=0;r<e.length;r++){n=e[r];Array.isArray(n)?t.push(this.copyArray(n)):typeof n=="object"?t.push(this.copyObject(n)):t.push(n)}return t};CSSOCompressor.prototype.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t};CSSOCompressor.prototype.pathUp=function(e){return e.substr(0,e.lastIndexOf("/"))};