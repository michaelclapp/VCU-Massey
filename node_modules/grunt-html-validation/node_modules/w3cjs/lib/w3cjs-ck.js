function setW3cCheckUrl(e){w3cCheckUrl=e}function validate(e){var t=e.output||defaultOutput,n=e.callback||defaultCallback,r=e.doctype||defaultDoctype,i=e.charset||defaultCharset,s=e.file;if(typeof s=="undefined")return!1;var o=!0;if(s.substr(0,5)==="http:"||s.substr(0,6)==="https:")o=!1;if(o){var u=request.post(w3cCheckUrl);u.set("User-Agent","w3cjs - npm module");u.field("output",t);u.field("uploaded_file",fs.readFileSync(s,"utf8"));r!==null&&u.field("doctype",r);i!==null&&u.field("charset",i)}else{var u=request.get(w3cCheckUrl);u.set("User-Agent","w3cjs - npm module");u.query({output:t});u.query({uri:s});r!==null&&u.query({doctype:r});i!==null&&u.query({charset:i})}u.end(function(e){t==="json"?n(e.body):n(e.text)})}var request=require("superagent"),fs=require("fs"),w3cCheckUrl="http://validator.w3.org/check",defaultOutput="json",defaultDoctype=null,defaultCharset=null,defaultCallback=function(e){console.log(e)},w3cjs={validate:validate,setW3cCheckUrl:setW3cCheckUrl};if(typeof exports!="undefined"){typeof module!="undefined"&&module.exports&&(exports=module.exports=w3cjs);exports.w3cjs=w3cjs}else root.w3cjs=w3cjs;