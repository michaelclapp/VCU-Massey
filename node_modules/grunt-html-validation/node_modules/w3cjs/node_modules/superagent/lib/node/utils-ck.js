/**
 * Module dependencies.
 */var StringDecoder=require("string_decoder").StringDecoder,Stream=require("stream"),zlib;try{zlib=require("zlib")}catch(e){}exports.uid=function(e){var t="",n="abcdefghijklmnopqrstuvwxyz123456789",r=n.length;while(e--)t+=n[Math.random()*r|0];return t};exports.type=function(e){return e.split(/ *; */).shift()};exports.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();r&&i&&(e[r]=i);return e},{})};exports.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1),i=n[1].split(/ *= */)[1].slice(1,-1);e[i]=r;return e},{})};exports.unzip=function(e,t){if(!zlib)return;var n=zlib.createUnzip(),r=new Stream,i;r.req=e;n.on("error",function(e){r.emit("error",e)});t.pipe(n);t.setEncoding=function(e){i=new StringDecoder(e)};n.on("data",function(e){if(i){var t=i.write(e);t.length&&r.emit("data",t)}else r.emit("data",e)});n.on("end",function(){r.emit("end")});var s=t.on;t.on=function(e,n){if("data"==e||"end"==e)r.on(e,n);else if("error"==e){r.on(e,n);s.call(t,e,n)}else s.call(t,e,n)}};exports.cleanHeader=function(e){delete e["content-type"];delete e["content-length"];delete e["transfer-encoding"];delete e.cookie;delete e.host;return e};