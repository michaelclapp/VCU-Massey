/**
 * Module dependencies.
 */function Part(e){this.req=e;this.header={};this.headerSent=!1;this.request=e.request();this.writable=!0;e._boundary||this.assignBoundary()}var utils=require("./utils"),Stream=require("stream").Stream,mime=require("mime"),path=require("path"),basename=path.basename;module.exports=Part;Part.prototype.__proto__=Stream.prototype;Part.prototype.assignBoundary=function(){var e=utils.uid(32);this.req.set("Content-Type","multipart/form-data; boundary="+e);this.req._boundary=e};Part.prototype.set=function(e,t){if(!this._boundary){if(!this.request._hasFirstBoundary){this.request.write("--"+this.req._boundary+"\r\n");this.request._hasFirstBoundary=!0}else this.request.write("\r\n--"+this.req._boundary+"\r\n");this._boundary=!0}this.request.write(e+": "+t+"\r\n");return this};Part.prototype.type=function(e){return this.set("Content-Type",mime.lookup(e))};Part.prototype.name=function(e){this.set("Content-Disposition",'form-data; name="'+e+'"');return this};Part.prototype.attachment=function(e,t){this.type(t);this.set("Content-Disposition",'attachment; name="'+e+'"; filename="'+basename(t)+'"');return this};Part.prototype.write=function(e,t){if(!this._headerCRLF){this.request.write("\r\n");this._headerCRLF=!0}return this.request.write(e,t)};Part.prototype.end=function(){this.emit("end");this.complete=!0};