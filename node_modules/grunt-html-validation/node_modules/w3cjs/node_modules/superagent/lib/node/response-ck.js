/**
 * Module dependencies.
 */function Response(e,t,n){n=n||{};this.req=e;this.res=t;this.links={};this.text=t.text;this.body=t.body||{};this.files=t.files||{};this.buffered="string"==typeof this.text;this.header=this.headers=t.headers;this.setStatusProperties(t.statusCode);this.setHeaderProperties(this.header);this.setEncoding=t.setEncoding.bind(t);t.on("data",this.emit.bind(this,"data"));t.on("end",this.emit.bind(this,"end"));t.on("close",this.emit.bind(this,"close"));t.on("error",this.emit.bind(this,"error"))}function parseCookies(e){return Array.isArray(e)?e.map(Cookie.parse):[Cookie.parse(e)]}var utils=require("./utils"),Stream=require("stream");module.exports=Response;Response.prototype.__proto__=Stream.prototype;Response.prototype.get=function(e){return this.header[e.toLowerCase()]};Response.prototype.destroy=function(e){this.res.destroy(e)};Response.prototype.pause=function(){this.res.pause()};Response.prototype.resume=function(){this.res.resume()};Response.prototype.toError=function(){var e=this.req,t=e.method,n=e.path,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);i.status=this.status;i.method=t;i.path=n;return i};Response.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"",n=utils.params(t);for(var r in n)this[r]=n[r];this.type=utils.type(t);try{e.link&&(this.links=utils.parseLinks(e.link))}catch(i){}};Response.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e;this.statusType=t;this.info=1==t;this.ok=2==t;this.redirect=3==t;this.clientError=4==t;this.serverError=5==t;this.error=4==t||5==t?this.toError():!1;this.accepted=202==e;this.noContent=204==e;this.badRequest=400==e;this.unauthorized=401==e;this.notAcceptable=406==e;this.forbidden=403==e;this.notFound=404==e};