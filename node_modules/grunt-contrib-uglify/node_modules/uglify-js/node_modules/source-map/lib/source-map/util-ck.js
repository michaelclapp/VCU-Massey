/* -*- Mode: js; js-indent-level: 2; -*- *//*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */if(typeof define!="function")var define=require("amdefine")(module,require);define(function(e,t,n){function r(e,t,n){if(t in e)return e[t];if(arguments.length===3)return n;throw new Error('"'+t+'" is a required argument.')}function o(e){var t=e.match(i);return t?{scheme:t[1],auth:t[3],host:t[4],port:t[6],path:t[7]}:null}function u(e){var t=e.scheme+"://";e.auth&&(t+=e.auth+"@");e.host&&(t+=e.host);e.port&&(t+=":"+e.port);e.path&&(t+=e.path);return t}function a(e,t){var n;if(t.match(i)||t.match(s))return t;if(t.charAt(0)==="/"&&(n=o(e))){n.path=t;return u(n)}return e.replace(/\/$/,"")+"/"+t}function f(e){return"$"+e}function l(e){return e.substr(1)}function c(e,t){e=e.replace(/\/$/,"");var n=o(e);return t.charAt(0)=="/"&&n&&n.path=="/"?t.slice(1):t.indexOf(e+"/")===0?t.substr(e.length+1):t}function h(e,t){var n=e||"",r=t||"";return(n>r)-(n<r)}function p(e,t,n){var r;r=h(e.source,t.source);if(r)return r;r=e.originalLine-t.originalLine;if(r)return r;r=e.originalColumn-t.originalColumn;if(r||n)return r;r=h(e.name,t.name);if(r)return r;r=e.generatedLine-t.generatedLine;return r?r:e.generatedColumn-t.generatedColumn}function d(e,t,n){var r;r=e.generatedLine-t.generatedLine;if(r)return r;r=e.generatedColumn-t.generatedColumn;if(r||n)return r;r=h(e.source,t.source);if(r)return r;r=e.originalLine-t.originalLine;if(r)return r;r=e.originalColumn-t.originalColumn;return r?r:h(e.name,t.name)}t.getArg=r;var i=/([\w+\-.]+):\/\/((\w+:\w+)@)?([\w.]+)?(:(\d+))?(\S+)?/,s=/^data:.+\,.+/;t.urlParse=o;t.urlGenerate=u;t.join=a;t.toSetString=f;t.fromSetString=l;t.relative=c;t.compareByOriginalPositions=p;t.compareByGeneratedPositions=d});