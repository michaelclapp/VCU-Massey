var grunt=require("grunt"),fs=require("fs"),gruntTextReplace=require("../lib/grunt-text-replace"),replace=function(e){return gruntTextReplace.replace(e)};exports.textReplace={"Test error handling":{setUp:function(e){grunt.file.copy("test/text_files/test.txt","test/temp/testA.txt");grunt.file.copy("test/text_files/test.txt","test/temp/testB.txt");e()},tearDown:function(e){fs.unlinkSync("test/temp/testA.txt");fs.unlinkSync("test/temp/testB.txt");fs.rmdirSync("test/temp");e()},"Test no destination found":function(e){var t=grunt.fail.warncount;replace({src:"test/temp/testA.txt",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/testA.txt",overwrite:!0,replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/testA.txt",dest:"test/temp/",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);e.done()},"Test no replacements found":function(e){var t=grunt.fail.warncount;replace({src:"test/temp/testA.txt",dest:"test/temp/"});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/testA.txt",dest:"test/temp/",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);e.done()},"Test overwrite failure":function(e){var t=grunt.fail.warncount;replace({src:"test/temp/testA.txt",dest:"test/temp/",overwrite:!0,replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/*",overwrite:!0,replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/testA.txt",overwrite:!0,replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);e.done()},"Test destination error":function(e){var t=grunt.fail.warncount;replace({src:"test/temp/*",dest:"test/temp",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,1);replace({src:"test/temp/*",dest:"test/temp/testA.txt",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,2);replace({src:"test/temp/testA.txt",dest:"test/temp/testB.txt",replacements:[{from:"Hello",to:"Good bye"}]});e.equal(grunt.fail.warncount-t,2);e.done()}}};