module.exports=function(e){"use strict";var t=require("http"),n=1337;e.initConfig({watch:{nospawn:{files:["lib/nospawn.js"],tasks:["server"],options:{nospawn:!0}},spawn:{files:["lib/spawn.js"],tasks:["server"]},interrupt:{files:["lib/interrupt.js"],tasks:["long","long","long"],options:{nospawn:!0,interrupt:!0}}}});e.loadTasks("../../../tasks");var r;e.registerTask("server",function(){if(!r){r=t.createServer(function(e,t){t.writeHead(200,{"Content-Type":"text/plain"});t.end("Server is talking!")}).listen(n);e.log.writeln("Server is listening...")}else{var i=this.async();t.request({port:n},function(t){t.on("data",function(t){e.log.writeln(t);i()})}).end()}});e.registerTask("long",function(){setTimeout(this.async(),2e3)});e.registerTask("default",["server","watch"])};