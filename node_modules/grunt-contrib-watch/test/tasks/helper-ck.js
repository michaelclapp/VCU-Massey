var grunt=require("grunt"),path=require("path");module.exports=helper={};helper.fixtures=path.join(__dirname,"..","fixtures");helper.verboseLog=function(){};grunt.util._.indexOf(process.argv,"-v")!==-1&&(helper.verboseLog=function(){console.log.apply(null,arguments)});helper.assertTask=function(t,n){function u(e,t){var n=r(process.argv[0],o,{cwd:s}),u="";grunt.util._.isArray(e)||(e=[e]);e.push(function(){n.kill("SIGINT")});n.stdout.on("data",function(t){t=grunt.log.uncolor(String(t));u+=t;var n=!0;i!==!1&&(n=(new RegExp(i,"gm")).test(t));n&&setTimeout(function(){var t=e.shift();typeof t=="function"&&t()},500)});n.stderr.on("data",function(e){throw new Error(e)});n.on("exit",function(){t(u)})}var r=require("child_process").spawn;t=t||"default";n=n||{};var i=n.trigger||".*(Waiting).*";delete n.trigger;var s=n.cwd||process.cwd();delete n.cwd;var o=[process.argv[1]];grunt.util._.each(n,function(e,t){o.push("--"+t);o.push(e)});o=o.concat(t);u.options=n;return u};helper.cleanUp=function(t){typeof t=="string"&&(t=[t]);t.forEach(function(e){e=path.join(helper.fixtures,e);grunt.file.exists(e)&&grunt.file.delete(e)})};helper.unixify=function(e){return e.replace(/\\/g,"/").replace(/\r\n|\n/g,"\n")};