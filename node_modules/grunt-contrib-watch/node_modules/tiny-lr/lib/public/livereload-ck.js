(function(){var e={},t={},n={},r={},i={},s={},o={},u={},a={},f;f={bind:function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){e[t]=1;return e.attachEvent("onpropertychange",function(e){if(e.propertyName===t)return n()})}throw new Error("Attempt to attach custom event "+t+" to something which isn't a DOMElement")},fire:function(e,t){var n;if(e.addEventListener){n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);return document.dispatchEvent(n)}if(!e.attachEvent)throw new Error("Attempt to fire custom event "+t+" on something which isn't a DOMElement");if(e[t])return e[t]++}};e.bind=f.bind;e.fire=f.fire;var l,c,h,p,d=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1};t.PROTOCOL_6=l="http://livereload.com/protocols/official-6";t.PROTOCOL_7=c="http://livereload.com/protocols/official-7";t.ProtocolError=p=function(){function e(e,t){this.message="LiveReload protocol error ("+e+') after receiving data: "'+t+'".'}return e}();t.Parser=h=function(){function e(e){this.handlers=e;this.reset()}e.prototype.reset=function(){return this.protocol=null};e.prototype.process=function(e){var t,n,r,i;try{if(this.protocol==null){if(e.match(/^!!ver:([\d.]+)$/))this.protocol=6;else if(n=this._parseMessage(e,["hello"])){if(!n.protocols.length)throw new p("no protocols specified in handshake message");if(d.call(n.protocols,c)>=0)this.protocol=7;else{if(!(d.call(n.protocols,l)>=0))throw new p("no supported protocols found");this.protocol=6}}return this.handlers.connected(this.protocol)}if(this.protocol===6){n=JSON.parse(e);if(!n.length)throw new p("protocol 6 messages must be arrays");t=n[0],r=n[1];if(t!=="refresh")throw new p("unknown protocol 6 command");return this.handlers.message({command:"reload",path:r.path,liveCSS:(i=r.apply_css_live)!=null?i:!0})}n=this._parseMessage(e,["reload","alert"]);return this.handlers.message(n)}catch(s){if(s instanceof p)return this.handlers.error(s);throw s}};e.prototype._parseMessage=function(e,t){var n,r;try{n=JSON.parse(e)}catch(i){throw new p("unparsable JSON",e)}if(!n.command)throw new p('missing "command" key',e);if(r=n.command,d.call(t,r)<0)throw new p("invalid command '"+n.command+"', only valid commands are: "+t.join(", ")+")",e);return n};return e}();var v,l,c,h,m,g;g=t,h=g.Parser,l=g.PROTOCOL_6,c=g.PROTOCOL_7;m="2.0.8";n.Connector=v=function(){function e(e,t,n,r){var i=this;this.options=e;this.WebSocket=t;this.Timer=n;this.handlers=r;this._uri="ws://"+this.options.host+":"+this.options.port+"/livereload";this._nextDelay=this.options.mindelay;this._connectionDesired=!1;this.protocol=0;this.protocolParser=new h({connected:function(e){i.protocol=e;i._handshakeTimeout.stop();i._nextDelay=i.options.mindelay;i._disconnectionReason="broken";return i.handlers.connected(e)},error:function(e){i.handlers.error(e);return i._closeOnError()},message:function(e){return i.handlers.message(e)}});this._handshakeTimeout=new n(function(){if(!i._isSocketConnected())return;i._disconnectionReason="handshake-timeout";return i.socket.close()});this._reconnectTimer=new n(function(){if(!i._connectionDesired)return;return i.connect()});this.connect()}e.prototype._isSocketConnected=function(){return this.socket&&this.socket.readyState===this.WebSocket.OPEN};e.prototype.connect=function(){var e=this;this._connectionDesired=!0;if(this._isSocketConnected())return;this._reconnectTimer.stop();this._disconnectionReason="cannot-connect";this.protocolParser.reset();this.handlers.connecting();this.socket=new this.WebSocket(this._uri);this.socket.onopen=function(t){return e._onopen(t)};this.socket.onclose=function(t){return e._onclose(t)};this.socket.onmessage=function(t){return e._onmessage(t)};return this.socket.onerror=function(t){return e._onerror(t)}};e.prototype.disconnect=function(){this._connectionDesired=!1;this._reconnectTimer.stop();if(!this._isSocketConnected())return;this._disconnectionReason="manual";return this.socket.close()};e.prototype._scheduleReconnection=function(){if(!this._connectionDesired)return;if(!this._reconnectTimer.running){this._reconnectTimer.start(this._nextDelay);return this._nextDelay=Math.min(this.options.maxdelay,this._nextDelay*2)}};e.prototype.sendCommand=function(e){if(this.protocol==null)return;return this._sendCommand(e)};e.prototype._sendCommand=function(e){return this.socket.send(JSON.stringify(e))};e.prototype._closeOnError=function(){this._handshakeTimeout.stop();this._disconnectionReason="error";return this.socket.close()};e.prototype._onopen=function(e){var t;this.handlers.socketConnected();this._disconnectionReason="handshake-failed";t={command:"hello",protocols:[l,c]};t.ver=m;this.options.ext&&(t.ext=this.options.ext);this.options.extver&&(t.extver=this.options.extver);this.options.snipver&&(t.snipver=this.options.snipver);this._sendCommand(t);return this._handshakeTimeout.start(this.options.handshake_timeout)};e.prototype._onclose=function(e){this.protocol=0;this.handlers.disconnected(this._disconnectionReason,this._nextDelay);return this._scheduleReconnection()};e.prototype._onerror=function(e){};e.prototype._onmessage=function(e){return this.protocolParser.process(e.data)};return e}();var y,b=function(e,t){return function(){return e.apply(t,arguments)}};r.Timer=y=function(){function e(e){this.func=e;this.running=!1;this.id=null;this._handler=b(function(){this.running=!1;this.id=null;return this.func()},this)}e.prototype.start=function(e){this.running&&clearTimeout(this.id);this.id=setTimeout(this._handler,e);return this.running=!0};e.prototype.stop=function(){if(this.running){clearTimeout(this.id);this.running=!1;return this.id=null}};return e}();y.start=function(e,t){return setTimeout(t,e)};var w;i.Options=w=function(){function e(){this.host=null;this.port=35729;this.snipver=null;this.ext=null;this.extver=null;this.mindelay=1e3;this.maxdelay=6e4;this.handshake_timeout=5e3}e.prototype.set=function(e,t){switch(typeof this[e]){case"undefined":break;case"number":return this[e]=+t;default:return this[e]=t}};return e}();w.extract=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;h=e.getElementsByTagName("script");for(a=0,l=h.length;a<l;a++){t=h[a];if((u=t.src)&&(r=u.match(/^[^:]+:\/\/(.*)\/z?livereload\.js(?:\?(.*))?$/))){s=new w;if(i=r[1].match(/^([^\/:]+)(?::(\d+))?$/)){s.host=i[1];i[2]&&(s.port=parseInt(i[2],10))}if(r[2]){p=r[2].split("&");for(f=0,c=p.length;f<c;f++){o=p[f];(n=o.split("=")).length>1&&s.set(n[0].replace(/-/g,"_"),n.slice(1).join("="))}}return s}}return null};(function(){var e,t,n,r,i,o,u;u=function(e){var t,n,r;if((n=e.indexOf("#"))>=0){t=e.slice(n);e=e.slice(0,n)}else t="";if((n=e.indexOf("?"))>=0){r=e.slice(n);e=e.slice(0,n)}else r="";return{url:e,params:r,hash:t}};r=function(e){var t;e=u(e).url;e.indexOf("file://")===0?t=e.replace(/^file:\/\/(localhost)?/,""):t=e.replace(/^([^:]+:)?\/\/([^:\/]+)(:\d*)?\//,"/");return decodeURIComponent(t)};o=function(e,t,r){var i,s,o,u,a;i={score:0};for(u=0,a=t.length;u<a;u++){s=t[u];o=n(e,r(s));o>i.score&&(i={object:s,score:o})}return i.score>0?i:null};n=function(e,t){var n,r,i,s;e=e.replace(/^\/+/,"").toLowerCase();t=t.replace(/^\/+/,"").toLowerCase();if(e===t)return 1e4;n=e.split("/").reverse();r=t.split("/").reverse();s=Math.min(n.length,r.length);i=0;while(i<s&&n[i]===r[i])++i;return i};i=function(e,t){return n(e,t)>0};e=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}];s.Reloader=t=function(){function t(e,t,n){this.window=e;this.console=t;this.Timer=n;this.document=this.window.document;this.importCacheWaitPeriod=200;this.plugins=[]}t.name="Reloader";t.prototype.addPlugin=function(e){return this.plugins.push(e)};t.prototype.analyze=function(e){return results};t.prototype.reload=function(e,t){var n,r,i,s,o;this.options=t;(r=this.options).stylesheetReloadTimeout==null&&(r.stylesheetReloadTimeout=15e3);o=this.plugins;for(i=0,s=o.length;i<s;i++){n=o[i];if(n.reload&&n.reload(e,t))return}if(t.liveCSS&&e.match(/\.css$/i)&&this.reloadStylesheet(e))return;if(t.liveImg&&e.match(/\.(jpe?g|png|gif)$/i)){this.reloadImages(e);return}return this.reloadPage()};t.prototype.reloadPage=function(){return this.window.document.location.reload()};t.prototype.reloadImages=function(t){var n,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;n=this.generateUniqueString();g=this.document.images;for(f=0,p=g.length;f<p;f++){s=g[f];i(t,r(s.src))&&(s.src=this.generateCacheBustUrl(s.src,n))}if(this.document.querySelectorAll)for(l=0,d=e.length;l<d;l++){y=e[l],o=y.selector,u=y.styleNames;b=this.document.querySelectorAll("[style*="+o+"]");for(c=0,v=b.length;c<v;c++){s=b[c];this.reloadStyleImages(s.style,u,t,n)}}if(this.document.styleSheets){w=this.document.styleSheets;E=[];for(h=0,m=w.length;h<m;h++){a=w[h];E.push(this.reloadStylesheetImages(a,t,n))}return E}};t.prototype.reloadStylesheetImages=function(t,n,r){var i,s,o,u,a,f,l;try{s=t!=null?t.cssRules:void 0}catch(c){}if(!s)return;for(u=0,f=s.length;u<f;u++){i=s[u];switch(i.type){case CSSRule.IMPORT_RULE:this.reloadStylesheetImages(i.styleSheet,n,r);break;case CSSRule.STYLE_RULE:for(a=0,l=e.length;a<l;a++){o=e[a].styleNames;this.reloadStyleImages(i.style,o,n,r)}break;case CSSRule.MEDIA_RULE:this.reloadStylesheetImages(i,n,r)}}};t.prototype.reloadStyleImages=function(e,t,n,s){var o,u,a,f,l,c=this;for(f=0,l=t.length;f<l;f++){u=t[f];a=e[u];if(typeof a=="string"){o=a.replace(/\burl\s*\(([^)]*)\)/,function(e,t){return i(n,r(t))?"url("+c.generateCacheBustUrl(t,s)+")":e});o!==a&&(e[u]=o)}}};t.prototype.reloadStylesheet=function(e){var t,n,i,s,u,a,f,l,c,h,p,d,v,m,g,y=this;i=function(){var e,t,r,i;r=this.document.getElementsByTagName("link");i=[];for(e=0,t=r.length;e<t;e++){n=r[e];n.rel==="stylesheet"&&!n.__LiveReload_pendingRemoval&&i.push(n)}return i}.call(this);t=[];m=this.document.getElementsByTagName("style");for(a=0,h=m.length;a<h;a++){u=m[a];u.sheet&&this.collectImportedStylesheets(u,u.sheet,t)}for(f=0,p=i.length;f<p;f++){n=i[f];this.collectImportedStylesheets(n,n.sheet,t)}if(this.window.StyleFix&&this.document.querySelectorAll){g=this.document.querySelectorAll("style[data-href]");for(l=0,d=g.length;l<d;l++){u=g[l];i.push(u)}}this.console.log("LiveReload found "+i.length+" LINKed stylesheets, "+t.length+" @imported stylesheets");s=o(e,i.concat(t),function(e){return r(y.linkHref(e))});if(s)if(s.object.rule){this.console.log("LiveReload is reloading imported stylesheet: "+s.object.href);this.reattachImportedRule(s.object)}else{this.console.log("LiveReload is reloading stylesheet: "+this.linkHref(s.object));this.reattachStylesheetLink(s.object)}else{this.console.log("LiveReload will reload all stylesheets because path '"+e+"' did not match any specific one");for(c=0,v=i.length;c<v;c++){n=i[c];this.reattachStylesheetLink(n)}}return!0};t.prototype.collectImportedStylesheets=function(e,t,n){var r,i,s,o,u;try{s=t!=null?t.cssRules:void 0}catch(a){}if(s&&s.length)for(r=o=0,u=s.length;o<u;r=++o){i=s[r];switch(i.type){case CSSRule.CHARSET_RULE:continue;case CSSRule.IMPORT_RULE:n.push({link:e,rule:i,index:r,href:i.href});this.collectImportedStylesheets(e,i.styleSheet,n);break;default:}}};t.prototype.waitUntilCssLoads=function(e,t){var n,r,i,s=this;n=!1;r=function(){if(n)return;n=!0;return t()};e.onload=function(){console.log("onload!");s.knownToSupportCssOnLoad=!0;return r()};this.knownToSupportCssOnLoad||(i=function(){if(e.sheet){console.log("polling!");return r()}return s.Timer.start(50,i)})();return this.Timer.start(this.options.stylesheetReloadTimeout,r)};t.prototype.linkHref=function(e){return e.href||e.getAttribute("data-href")};t.prototype.reattachStylesheetLink=function(e){var t,n,r=this;if(e.__LiveReload_pendingRemoval)return;e.__LiveReload_pendingRemoval=!0;if(e.tagName==="STYLE"){t=this.document.createElement("link");t.rel="stylesheet";t.media=e.media;t.disabled=e.disabled}else t=e.cloneNode(!1);t.href=this.generateCacheBustUrl(this.linkHref(e));n=e.parentNode;n.lastChild===e?n.appendChild(t):n.insertBefore(t,e.nextSibling);return this.waitUntilCssLoads(t,function(){var n;/AppleWebKit/.test(navigator.userAgent)?n=5:n=200;return r.Timer.start(n,function(){var n;if(!e.parentNode)return;e.parentNode.removeChild(e);t.onreadystatechange=null;return(n=r.window.StyleFix)!=null?n.link(t):void 0})})};t.prototype.reattachImportedRule=function(e){var t,n,r,i,s,o,u,a,f=this;u=e.rule,n=e.index,r=e.link;o=u.parentStyleSheet;t=this.generateCacheBustUrl(u.href);i=u.media.length?[].join.call(u.media,", "):"";s='@import url("'+t+'") '+i+";";u.__LiveReload_newHref=t;a=this.document.createElement("link");a.rel="stylesheet";a.href=t;a.__LiveReload_pendingRemoval=!0;r.parentNode&&r.parentNode.insertBefore(a,r);return this.Timer.start(this.importCacheWaitPeriod,function(){a.parentNode&&a.parentNode.removeChild(a);if(u.__LiveReload_newHref!==t)return;o.insertRule(s,n);o.deleteRule(n+1);u=o.cssRules[n];u.__LiveReload_newHref=t;return f.Timer.start(f.importCacheWaitPeriod,function(){if(u.__LiveReload_newHref!==t)return;o.insertRule(s,n);return o.deleteRule(n+1)})})};t.prototype.generateUniqueString=function(){return"livereload="+Date.now()};t.prototype.generateCacheBustUrl=function(e,t){var n,r,i,s;t==null&&(t=this.generateUniqueString());s=u(e),e=s.url,n=s.hash,r=s.params;this.options.overrideURL&&e.indexOf(this.options.serverURL)<0&&(e=this.options.serverURL+this.options.overrideURL+"?url="+encodeURIComponent(e));i=r.replace(/(\?|&)livereload=(\d+)/,function(e,n){return""+n+t});i===r&&(r.length===0?i="?"+t:i=""+r+"&"+t);return e+i+n};return t}()}).call(this);var v,E,w,S,y;v=n.Connector;y=r.Timer;w=i.Options;S=s.Reloader;o.LiveReload=E=function(){function e(e){var t=this;this.window=e;this.listeners={};this.plugins=[];this.pluginIdentifiers={};this.console=this.window.location.href.match(/LR-verbose/)&&this.window.console&&this.window.console.log&&this.window.console.error?this.window.console:{log:function(){},error:function(){}};if(!(this.WebSocket=this.window.WebSocket||this.window.MozWebSocket)){console.error("LiveReload disabled because the browser does not seem to support web sockets");return}if(!(this.options=w.extract(this.window.document))){console.error("LiveReload disabled because it could not find its own <SCRIPT> tag");return}this.reloader=new S(this.window,this.console,y);this.connector=new v(this.options,this.WebSocket,y,{connecting:function(){},socketConnected:function(){},connected:function(e){var n;typeof (n=t.listeners).connect=="function"&&n.connect();t.log("LiveReload is connected to "+t.options.host+":"+t.options.port+" (protocol v"+e+").");return t.analyze()},error:function(e){return e instanceof p?console.log(""+e.message+"."):console.log("LiveReload internal error: "+e.message)},disconnected:function(e,n){var r;typeof (r=t.listeners).disconnect=="function"&&r.disconnect();switch(e){case"cannot-connect":return t.log("LiveReload cannot connect to "+t.options.host+":"+t.options.port+", will retry in "+n+" sec.");case"broken":return t.log("LiveReload disconnected from "+t.options.host+":"+t.options.port+", reconnecting in "+n+" sec.");case"handshake-timeout":return t.log("LiveReload cannot connect to "+t.options.host+":"+t.options.port+" (handshake timeout), will retry in "+n+" sec.");case"handshake-failed":return t.log("LiveReload cannot connect to "+t.options.host+":"+t.options.port+" (handshake failed), will retry in "+n+" sec.");case"manual":break;case"error":break;default:return t.log("LiveReload disconnected from "+t.options.host+":"+t.options.port+" ("+e+"), reconnecting in "+n+" sec.")}},message:function(e){switch(e.command){case"reload":return t.performReload(e);case"alert":return t.performAlert(e)}}})}e.prototype.on=function(e,t){return this.listeners[e]=t};e.prototype.log=function(e){return this.console.log(""+e)};e.prototype.performReload=function(e){var t,n;this.log("LiveReload received reload request for "+e.path+".");return this.reloader.reload(e.path,{liveCSS:(t=e.liveCSS)!=null?t:!0,liveImg:(n=e.liveImg)!=null?n:!0,originalPath:e.originalPath||"",overrideURL:e.overrideURL||"",serverURL:"http://"+this.options.host+":"+this.options.port})};e.prototype.performAlert=function(e){return alert(e.message)};e.prototype.shutDown=function(){var e;this.connector.disconnect();this.log("LiveReload disconnected.");return typeof (e=this.listeners).shutdown=="function"?e.shutdown():void 0};e.prototype.hasPlugin=function(e){return!!this.pluginIdentifiers[e]};e.prototype.addPlugin=function(e){var t,n=this;if(this.hasPlugin(e.identifier))return;this.pluginIdentifiers[e.identifier]=!0;t=new e(this.window,{_livereload:this,_reloader:this.reloader,_connector:this.connector,console:this.console,Timer:y,generateCacheBustUrl:function(e){return n.reloader.generateCacheBustUrl(e)}});this.plugins.push(t);this.reloader.addPlugin(t)};e.prototype.analyze=function(){var e,t,n,r,i,s;if(!(this.connector.protocol>=7))return;n={};s=this.plugins;for(r=0,i=s.length;r<i;r++){e=s[r];n[e.constructor.identifier]=t=(typeof e.analyze=="function"?e.analyze():void 0)||{};t.version=e.constructor.version}this.connector.sendCommand({command:"info",plugins:n,url:this.window.location.href})};return e}();var x;u=x=function(){function e(e,t){this.window=e;this.host=t}e.identifier="less";e.version="1.0";e.prototype.reload=function(e,t){if(this.window.less&&this.window.less.refresh){if(e.match(/\.less$/i))return this.reloadLess(e);if(t.originalPath.match(/\.less$/i))return this.reloadLess(t.originalPath)}return!1};e.prototype.reloadLess=function(e){var t,n,r,i;n=function(){var e,n,r,i;r=document.getElementsByTagName("link");i=[];for(e=0,n=r.length;e<n;e++){t=r[e];(t.href&&t.rel==="stylesheet/less"||t.rel.match(/stylesheet/)&&t.type.match(/^text\/(x-)?less$/))&&i.push(t)}return i}();if(n.length===0)return!1;for(r=0,i=n.length;r<i;r++){t=n[r];t.href=this.host.generateCacheBustUrl(t.href)}this.host.console.log("LiveReload is asking LESS to recompile all stylesheets");this.window.less.refresh(!0);return!0};e.prototype.analyze=function(){return{disable:!!this.window.less&&!!this.window.less.refresh}};return e}();var f,E,T;f=e;E=window.LiveReload=new o.LiveReload(window);for(T in window)T.match(/^LiveReloadPlugin/)&&E.addPlugin(window[T]);E.addPlugin(u);E.on("shutdown",function(){return delete window.LiveReload});E.on("connect",function(){return f.fire(document,"LiveReloadConnect")});E.on("disconnect",function(){return f.fire(document,"LiveReloadDisconnect")});f.bind(document,"LiveReloadShutDown",function(){return E.shutDown()})})();