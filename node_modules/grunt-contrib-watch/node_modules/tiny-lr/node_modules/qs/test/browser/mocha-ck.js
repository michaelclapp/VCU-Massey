(function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');if(!r.exports){r.exports={};r.call(r.exports,r,r.exports,e.relative(n))}return r.exports}e.modules={};e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n};e.register=function(t,n){e.modules[t]=n};e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return e(r.join("/"))}};e.register("browser/debug.js",function(e,t,n){e.exports=function(e){return function(){}}});e.register("browser/diff.js",function(e,t,n){});e.register("browser/events.js",function(e,t,n){function r(e){return"[object Array]"=={}.toString.call(e)}function i(){}t.EventEmitter=i;i.prototype.on=function(e,t){this.$events||(this.$events={});this.$events[e]?r(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t;return this};i.prototype.addListener=i.prototype.on;i.prototype.once=function(e,t){function r(){n.removeListener(e,r);t.apply(this,arguments)}var n=this;r.listener=t;this.on(e,r);return this};i.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var n=this.$events[e];if(r(n)){var i=-1;for(var s=0,o=n.length;s<o;s++)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;n.splice(i,1);n.length||delete this.$events[e]}else(n===t||n.listener&&n.listener===t)&&delete this.$events[e]}return this};i.prototype.removeAllListeners=function(e){if(e===undefined){this.$events={};return this}this.$events&&this.$events[e]&&(this.$events[e]=null);return this};i.prototype.listeners=function(e){this.$events||(this.$events={});this.$events[e]||(this.$events[e]=[]);r(this.$events[e])||(this.$events[e]=[this.$events[e]]);return this.$events[e]};i.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var n=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,n);else{if(!r(t))return!1;var i=t.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,n)}return!0}});e.register("browser/fs.js",function(e,t,n){});e.register("browser/path.js",function(e,t,n){});e.register("browser/progress.js",function(e,t,n){function r(){this.percent=0;this.size(0);this.fontSize(11);this.font("helvetica, arial, sans-serif")}e.exports=r;r.prototype.size=function(e){this._size=e;return this};r.prototype.text=function(e){this._text=e;return this};r.prototype.fontSize=function(e){this._fontSize=e;return this};r.prototype.font=function(e){this._font=e;return this};r.prototype.update=function(e){this.percent=e;return this};r.prototype.draw=function(e){var t=Math.min(this.percent,100),n=this._size,r=n/2,i=r,s=r,o=r-1,u=this._fontSize;e.font=u+"px "+this._font;var a=Math.PI*2*(t/100);e.clearRect(0,0,n,n);e.strokeStyle="#9f9f9f";e.beginPath();e.arc(i,s,o,0,a,!1);e.stroke();e.strokeStyle="#eee";e.beginPath();e.arc(i,s,o-1,0,a,!0);e.stroke();var f=this._text||(t|0)+"%",l=e.measureText(f).width;e.fillText(f,i-l/2+1,s+u/2-1);return this}});e.register("browser/tty.js",function(e,t,n){t.isatty=function(){return!0};t.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}});e.register("context.js",function(e,t,n){function r(){}e.exports=r;r.prototype.runnable=function(e){this._runnable=e;return this};r.prototype.timeout=function(e){this._runnable.timeout(e);return this};r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_runnable"==e?undefined:t},2)}});e.register("hook.js",function(e,t,n){function i(e,t){r.call(this,e,t);this.type="hook"}var r=n("./runnable");e.exports=i;i.prototype=new r;i.prototype.constructor=i});e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.xdescribe=function(){};e.xit=function(){};e.before=function(e){t[0].beforeAll(e)};e.after=function(e){t[0].afterAll(e)};e.beforeEach=function(e){t[0].beforeEach(e)};e.afterEach=function(e){t[0].afterEach(e)};e.describe=function(e,n){var i=r.create(t[0],e);t.unshift(i);n();t.shift()};e.it=function(e,n){t[0].addTest(new i(e,n))}})}});e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){function n(e){var s;for(var o in e)if("function"==typeof e[o]){var u=e[o];switch(o){case"before":t[0].beforeAll(u);break;case"after":t[0].afterAll(u);break;case"beforeEach":t[0].beforeEach(u);break;case"afterEach":t[0].afterEach(u);break;default:t[0].addTest(new i(o,u))}}else{var s=r.create(t[0],o);t.unshift(s);n(e[o]);t.shift()}}var t=[e];e.on("require",n)}});e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd");t.tdd=n("./tdd");t.qunit=n("./qunit");t.exports=n("./exports")});e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.before=function(e){t[0].beforeAll(e)};e.after=function(e){t[0].afterAll(e)};e.beforeEach=function(e){t[0].beforeEach(e)};e.afterEach=function(e){t[0].afterEach(e)};e.suite=function(e){t.length>1&&t.shift();var n=r.create(t[0],e);t.unshift(n)};e.test=function(e,n){t[0].addTest(new i(e,n))}})}});e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.setup=function(e){t[0].beforeEach(e)};e.teardown=function(e){t[0].afterEach(e)};e.suiteSetup=function(e){t[0].beforeAll(e)};e.suiteTeardown=function(e){t[0].afterAll(e)};e.suite=function(e,n){var i=r.create(t[0],e);t.unshift(i);n();t.shift()};e.test=function(e,n){t[0].addTest(new i(e,n))}})}});e.register("mocha.js",function(e,t,n){function i(e){return __dirname+"/../images/"+e+".png"}function s(e){e=e||{};e.grep="string"==typeof e.grep?new RegExp(e.grep):e.grep;this.files=[];this.options=e;this.suite=new t.Suite("",new t.Context);this.ui(e.ui);this.reporter(e.reporter);e.timeout&&this.suite.timeout(e.timeout)}var r=n("browser/path");t=e.exports=s;t.version="1.0.3";t.utils=n("./utils");t.interfaces=n("./interfaces");t.reporters=n("./reporters");t.Runnable=n("./runnable");t.Context=n("./context");t.Runner=n("./runner");t.Suite=n("./suite");t.Hook=n("./hook");t.Test=n("./test");s.prototype.addFile=function(e){this.files.push(e);return this};s.prototype.reporter=function(e){e=e||"dot";this._reporter=n("./reporters/"+e);if(!this._reporter)throw new Error('invalid reporter "'+e+'"');return this};s.prototype.ui=function(e){e=e||"bdd";this._ui=t.interfaces[e];if(!this._ui)throw new Error('invalid interface "'+e+'"');this._ui=this._ui(this.suite);return this};s.prototype.loadFiles=function(){var e=this.suite;this.files.forEach(function(t){t=r.resolve(t);e.emit("pre-require",global,t);e.emit("require",n(t),t);e.emit("post-require",global,t)})};s.prototype.growl=function(e,t){var r=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var s=n.failures+" of "+e.total+" tests failed";r(s,{title:"Failed",image:i("fail")})}else r(n.passes+" tests passed in "+n.duration+"ms",{title:"Passed",image:i("pass")})})};s.prototype.grep=function(e){this.options.grep="string"==typeof e?new RegExp(e):e;return this};s.prototype.run=function(e){this.loadFiles();var n=this.suite,r=this.options,i=new t.Runner(n),s=new this._reporter(i);i.ignoreLeaks=r.ignoreLeaks;r.grep&&i.grep(r.grep);r.globals&&i.globals(r.globals);r.growl&&this.growl(i,s);return i.run(e)}});e.register("reporters/base.js",function(e,t,n){function h(e){var n=this,r=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},i=this.failures=[];if(!e)return;this.runner=e;e.on("start",function(){r.start=new s});e.on("suite",function(e){r.suites=r.suites||0;e.root||r.suites++});e.on("test end",function(e){r.tests=r.tests||0;r.tests++});e.on("pass",function(e){r.passes=r.passes||0;var n=t.slow/2;e.speed=e.duration>t.slow?"slow":e.duration>n?"medium":"fast";r.passes++});e.on("fail",function(e,t){r.failures=r.failures||0;r.failures++;e.err=t;i.push(e)});e.on("end",function(){r.end=new s;r.duration=new s-r.start});e.on("pending",function(){r.pending++})}function p(e,t){e=String(e);return Array(t-e.length+1).join(" ")+e}function d(e,t){return i["diff"+t](e.actual,e.expected).map(function(e){/^(\n+)$/.test(e.value)&&(e.value=Array(++RegExp.$1.length).join("<newline>"));return e.added?v("diff added",e.value):e.removed?v("diff removed",e.value):e.value}).join("")}function v(e,t){return t.split("\n").map(function(t){return c(e,t)}).join("\n")}var r=n("browser/tty"),i=n("browser/diff"),s=global.Date,o=global.setTimeout,u=global.setInterval,a=global.clearTimeout,f=global.clearInterval,l=r.isatty(1)&&r.isatty(2);t=e.exports=h;t.useColors=l;t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};var c=t.color=function(e,n){return t.useColors?"["+t.colors[e]+"m"+n+"[0m":n};t.window={width:l?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:r.getWindowSize()[1]:75};t.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){t.cursor.deleteLine();t.cursor.beginningOfLine()}};t.slow=75;t.list=function(e){console.error();e.forEach(function(e,t){var n=c("error title","  %s) %s:\n")+c("error message","     %s")+c("error stack","\n%s\n"),r=e.err,i=r.message||"",s=r.stack||i,o=s.indexOf(i)+i.length,u=s.slice(0,o),a=r.actual,f=r.expected;if("string"==typeof a&&"string"==typeof f){var l=Math.max(a.length,f.length);l<20?u=d(r,"Chars"):u=d(r,"Words");var h=u.split("\n");if(h.length>4){var v=String(h.length).length;u=h.map(function(e,t){return p(++t,v)+" |"+" "+e}).join("\n")}u="\n"+c("diff removed","actual")+" "+c("diff added","expected")+"\n\n"+u+"\n";u=u.replace(/^/gm,"      ");n=c("error title","  %s) %s:\n%s")+c("error stack","\n%s\n")}s=s.slice(o?o+1:o).replace(/^/gm,"  ");console.error(n,t+1,e.fullTitle(),u,s)})};h.prototype.epilogue=function(){function r(e){return 1==e?"test":"tests"}var e=this.stats,t,n;console.log();if(e.failures){t=c("bright fail","  ✖")+c("fail"," %d of %d %s failed")+c("light",":");console.error(t,e.failures,this.runner.total,r(this.runner.total));h.list(this.failures);console.error();return}t=c("bright pass","  ✔")+c("green"," %d %s complete")+c("light"," (%dms)");console.log(t,e.tests||0,r(e.tests),e.duration);if(e.pending){t=c("pending","  •")+c("pending"," %d %s pending");console.log(t,e.pending,r(e.pending))}console.log()}});e.register("reporters/doc.js",function(e,t,n){function s(e){function a(){return Array(u).join("  ")}r.call(this,e);var t=this,n=this.stats,s=e.total,u=2;e.on("suite",function(e){if(e.root)return;++u;console.log('%s<section class="suite">',a());++u;console.log("%s<h1>%s</h1>",a(),e.title);console.log("%s<dl>",a())});e.on("suite end",function(e){if(e.root)return;console.log("%s</dl>",a());--u;console.log("%s</section>",a());--u});e.on("pass",function(e){console.log("%s  <dt>%s</dt>",a(),e.title);var t=i.escape(o(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",a(),t)})}function o(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var t=e.match(/^\n?( *)/)[1].length,n=new RegExp("^ {"+t+"}","gm");e=e.replace(n,"");return e}var r=n("./base"),i=n("../utils");t=e.exports=s});e.register("reporters/dot.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,s=r.window.width*.75|0,o=0;e.on("start",function(){process.stdout.write("\n  ")});e.on("pending",function(e){process.stdout.write(i("pending","."))});e.on("pass",function(e){++o%s==0&&process.stdout.write("\n  ");"slow"==e.speed?process.stdout.write(i("bright yellow",".")):process.stdout.write(i(e.speed,"."))});e.on("fail",function(e,t){++o%s==0&&process.stdout.write("\n  ");process.stdout.write(i("fail","."))});e.on("end",function(){console.log();t.epilogue()})}var r=n("./base"),i=r.color;t=e.exports=s;s.prototype=new r;s.prototype.constructor=s});e.register("reporters/html-cov.js",function(e,t,n){function s(e){var t=n("jade"),s=__dirname+"/templates/coverage.jade",u=i.readFileSync(s,"utf8"),a=t.compile(u,{filename:s}),f=this;r.call(this,e,!1);e.on("end",function(){process.stdout.write(a({cov:f.cov,coverageClass:o}))})}function o(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var r=n("./json-cov"),i=n("browser/fs");t=e.exports=s});e.register("reporters/html.js",function(e,t,n){function p(e){r.call(this,e);var t=this,n=this.stats,i=e.total,o=document.getElementById("mocha"),a=v(h),f=a.getElementsByTagName("li"),l=f[1].getElementsByTagName("em")[0],c=f[2].getElementsByTagName("em")[0],p=f[3].getElementsByTagName("em")[0],b=a.getElementsByTagName("canvas")[0],w=[o],E,S;if(b.getContext){S=b.getContext("2d");E=new s}if(!o)return d("#mocha div missing, add it to your document");o.appendChild(a);E&&E.size(40);e.on("suite",function(e){if(e.root)return;var t=v('<div class="suite"><h1>%s</h1></div>',e.title);w[0].appendChild(t);w.unshift(document.createElement("div"));t.appendChild(w[0])});e.on("suite end",function(e){if(e.root)return;w.shift()});e.on("fail",function(t,n){("hook"==t.type||n.uncaught)&&e.emit("test end",t)});e.on("test end",function(e){var t=n.tests/i*100|0;E&&E.update(t).draw(S);var r=new u-n.start;m(l,n.passes);m(c,n.failures);m(p,(r/1e3).toFixed(2));if("passed"==e.state)var s=v('<div class="test pass %e"><h2>%e<span class="duration">%ems</span></h2></div>',e.speed,e.title,e.duration);else if(e.pending)var s=v('<div class="test pass pending"><h2>%e</h2></div>',e.title);else{var s=v('<div class="test fail"><h2>%e</h2></div>',e.title),o=e.err.stack||e.err.toString();~o.indexOf(e.err.message)||(o=e.err.message+"\n"+o);"[object Error]"==o&&(o=e.err.message);!e.err.stack&&e.err.sourceURL&&e.err.line!==undefined&&(o+="\n("+e.err.sourceURL+":"+e.err.line+")");s.appendChild(v('<pre class="error">%e</pre>',o))}var a=s.getElementsByTagName("h2")[0];g(a,"click",function(){f.style.display="none"==f.style.display?"block":"none"});if(!e.pending){var f=v("<pre><code>%e</code></pre>",y(e.fn.toString()));s.appendChild(f);f.style.display="none"}w[0].appendChild(s)})}function d(e){document.body.appendChild(v('<div id="error">%s</div>',e))}function v(e){var t=arguments,n=document.createElement("div"),r=1;n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return o(t[r++])}});return n.firstChild}function m(e,t){e.textContent?e.textContent=t:e.innerText=t}function g(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function y(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var t=e.match(/^\n?( *)/)[1].length,n=new RegExp("^ {"+t+"}","gm");e=e.replace(n,"").replace(/^\s+/,"");return e}var r=n("./base"),i=n("../utils"),s=n("../browser/progress"),o=i.escape,u=global.Date,a=global.setTimeout,f=global.setInterval,l=global.clearTimeout,c=global.clearInterval;t=e.exports=p;var h='<ul id="stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes">passes: <em>0</em></li><li class="failures">failures: <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'});e.register("reporters/index.js",function(e,t,n){t.Base=n("./base");t.Dot=n("./dot");t.Doc=n("./doc");t.TAP=n("./tap");t.JSON=n("./json");t.HTML=n("./html");t.List=n("./list");t.Min=n("./min");t.Spec=n("./spec");t.Progress=n("./progress");t.Landing=n("./landing");t.JSONCov=n("./json-cov");t.HTMLCov=n("./html-cov");t.JSONStream=n("./json-stream");t.XUnit=n("./xunit");t.Teamcity=n("./teamcity")});e.register("reporters/json-cov.js",function(e,t,n){function i(e,t){var n=this,t=1==arguments.length?!0:t;r.call(this,e);var i=[],o=[],a=[];e.on("test end",function(e){i.push(e)});e.on("pass",function(e){a.push(e)});e.on("fail",function(e){o.push(e)});e.on("end",function(){var e=global._$jscoverage||{},r=n.cov=s(e);r.stats=n.stats;r.tests=i.map(u);r.failures=o.map(u);r.passes=a.map(u);if(!t)return;process.stdout.write(JSON.stringify(r,null,2))})}function s(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=o(n,e[n]);t.files.push(r);t.hits+=r.hits;t.misses+=r.misses;t.sloc+=r.sloc}t.sloc>0&&(t.coverage=t.hits/t.sloc*100);return t}function o(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};t.source.forEach(function(e,r){r++;if(t[r]===0){n.misses++;n.sloc++}else if(t[r]!==undefined){n.hits++;n.sloc++}n.source[r]={source:e,coverage:t[r]===undefined?"":t[r]}});n.coverage=n.hits/n.sloc*100;return n}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base");t=e.exports=i});e.register("reporters/json-stream.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=e.total;e.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))});e.on("pass",function(e){console.log(JSON.stringify(["pass",o(e)]))});e.on("fail",function(e,t){console.log(JSON.stringify(["fail",o(e)]))});e.on("end",function(){process.stdout.write(JSON.stringify(["end",t.stats]))})}function o(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.color;t=e.exports=s});e.register("reporters/json.js",function(e,t,n){function o(e){var t=this;r.call(this,e);var n=[],i=[],s=[];e.on("test end",function(e){n.push(e)});e.on("pass",function(e){s.push(e)});e.on("fail",function(e){i.push(e)});e.on("end",function(){var e={stats:t.stats,tests:n.map(u),failures:i.map(u),passes:s.map(u)};process.stdout.write(JSON.stringify(e,null,2))})}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o});e.register("reporters/landing.js",function(e,t,n){function o(e){function h(){var e=Array(o).join("-");return"  "+s("runway",e)}r.call(this,e);var t=this,n=this.stats,o=r.window.width*.75|0,u=e.total,a=process.stdout,f=s("plane","✈"),l=-1,c=0;e.on("start",function(){a.write("\n  ");i.hide()});e.on("test end",function(e){var t=-1==l?o*++c/u|0:l;if("failed"==e.state){f=s("plane crash","✈");l=t}a.write("[4F\n\n");a.write(h());a.write("\n  ");a.write(s("runway",Array(t).join("⋅")));a.write(f);a.write(s("runway",Array(o-t).join("⋅")+"\n"));a.write(h());a.write("[0m")});e.on("end",function(){i.show();console.log();t.epilogue()})}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;r.colors.plane=0;r.colors["plane crash"]=31;r.colors.runway=90;o.prototype=new r;o.prototype.constructor=o});e.register("reporters/list.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,o=0;e.on("start",function(){console.log()});e.on("test",function(e){process.stdout.write(s("pass","    "+e.fullTitle()+": "))});e.on("pending",function(e){var t=s("checkmark","  -")+s("pending"," %s");console.log(t,e.fullTitle())});e.on("pass",function(e){var t=s("checkmark","  ✓")+s("pass"," %s: ")+s(e.speed,"%dms");i.CR();console.log(t,e.fullTitle(),e.duration)});e.on("fail",function(e,t){i.CR();console.log(s("fail","  %d) %s"),++o,e.fullTitle())});e.on("end",t.epilogue.bind(t))}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;o.prototype=new r;o.prototype.constructor=o});e.register("reporters/markdown.js",function(e,t,n){function s(e){function f(e){return Array(u).join("#")+" "+e}function l(){return Array(u).join("  ")}function c(e,t){var n=t;t=t[e.title]=t[e.title]||{suite:e};e.suites.forEach(function(e){c(e,t)});return n}function h(e,t){++t;var n="",r;for(var s in e){if("suite"==s)continue;s&&(r=" - ["+s+"](#"+i.slug(e[s].suite.fullTitle())+")\n");s&&(n+=Array(t).join("  ")+r);n+=h(e[s],t)}--t;return n}function p(e){var t=c(e,{});return h(t,0)}r.call(this,e);var t=this,n=this.stats,s=e.total,u=0,a="";p(e.suite);e.on("suite",function(e){++u;var t=i.slug(e.fullTitle());a+='<a name="'+t+'" />'+"\n";a+=f(e.title)+"\n"});e.on("suite end",function(e){--u});e.on("pass",function(e){var t=o(e.fn.toString());a+=e.title+".\n";a+="\n```js";a+=t+"\n";a+="```\n\n"});e.on("end",function(){process.stdout.write("# TOC\n");process.stdout.write(p(e.suite));process.stdout.write(a)})}function o(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var t=e.match(/^\n?( *)/)[1].length,n=new RegExp("^ {"+t+"}","gm");e=e.replace(n,"");return e}var r=n("./base"),i=n("../utils");t=e.exports=s});e.register("reporters/min.js",function(e,t,n){function i(e){r.call(this,e);e.on("start",function(){process.stdout.write("[2J");process.stdout.write("[1;3H")});e.on("end",this.epilogue.bind(this))}var r=n("./base");t=e.exports=i;i.prototype=new r;i.prototype.constructor=i});e.register("reporters/progress.js",function(e,t,n){function o(e,t){r.call(this,e);var n=this,t=t||{},o=this.stats,u=r.window.width*.5|0,a=e.total,f=0,l=Math.max;t.open=t.open||"[";t.complete=t.complete||"▬";t.incomplete=t.incomplete||"⋅";t.close=t.close||"]";t.verbose=!1;e.on("start",function(){console.log();i.hide()});e.on("test end",function(){f++;var e=a-f,n=f/a,r=u*n|0,o=u-r;i.CR();process.stdout.write("[J");process.stdout.write(s("progress","  "+t.open));process.stdout.write(Array(r).join(t.complete));process.stdout.write(Array(o).join(t.incomplete));process.stdout.write(s("progress",t.close));t.verbose&&process.stdout.write(s("progress"," "+f+" of "+a))});e.on("end",function(){i.show();console.log();n.epilogue()})}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;r.colors.progress=90;o.prototype=new r;o.prototype.constructor=o});e.register("reporters/spec.js",function(e,t,n){function o(e){function a(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,o=0,u=0;e.on("start",function(){console.log()});e.on("suite",function(e){++o;console.log(s("suite","%s%s"),a(),e.title)});e.on("suite end",function(e){--o;1==o&&console.log()});e.on("test",function(e){process.stdout.write(a()+s("pass","  ◦ "+e.title+": "))});e.on("pending",function(e){var t=a()+s("pending","  - %s");console.log(t,e.title)});e.on("pass",function(e){if("fast"==e.speed){var t=a()+s("checkmark","  ✓")+s("pass"," %s ");i.CR();console.log(t,e.title)}else{var t=a()+s("checkmark","  ✓")+s("pass"," %s ")+s(e.speed,"(%dms)");i.CR();console.log(t,e.title,e.duration)}});e.on("fail",function(e,t){i.CR();console.log(a()+s("fail","  %d) %s"),++u,e.title)});e.on("end",t.epilogue.bind(t))}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;o.prototype=new r;o.prototype.constructor=o});e.register("reporters/tap.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,i=e.total,s=1;e.on("start",function(){console.log("%d..%d",1,i)});e.on("test end",function(){++s});e.on("pending",function(e){console.log("ok %d %s # SKIP -",s,u(e))});e.on("pass",function(e){console.log("ok %d %s",s,u(e))});e.on("fail",function(e,t){console.log("not ok %d %s",s,u(e));console.log(t.stack.replace(/^/gm,"  "))})}function u(e){return e.fullTitle().replace(/#/g,"")}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o});e.register("reporters/teamcity.js",function(e,t,n){function i(e){r.call(this,e);var t=this.stats;e.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")});e.on("test",function(e){console.log("##teamcity[testStarted name='"+s(e.fullTitle())+"']")});e.on("fail",function(e,t){console.log("##teamcity[testFailed name='"+s(e.fullTitle())+"' message='"+s(t.message)+"']")});e.on("pending",function(e){console.log("##teamcity[testIgnored name='"+s(e.fullTitle())+"' message='pending']")});e.on("test end",function(e){console.log("##teamcity[testFinished name='"+s(e.fullTitle())+"' duration='"+e.duration+"']")});e.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+t.duration+"']")})}function s(e){return e.replace(/'/g,"|'")}var r=n("./base");t=e.exports=i});e.register("reporters/xunit.js",function(e,t,n){function c(e){r.call(this,e);var t=this.stats,n=[],i=this;e.on("test end",function(e){n.push(e)});e.on("end",function(){console.log(p("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skip:t.tests-t.failures-t.passes,timestamp:(new o).toUTCString(),time:t.duration/1e3},!1));n.forEach(h);console.log("</testsuite>")})}function h(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var n=e.err;t.message=s(n.message);console.log(p("testcase",t,!1,p("failure",t,!1,d(n.stack))))}else e.pending?console.log(p("testcase",t,!1,p("skipped",{},!0))):console.log(p("testcase",t,!0))}function p(e,t,n,r){var i=n?"/>":">",o=[],u;for(var a in t)o.push(a+'="'+s(t[a])+'"');u="<"+e+(o.length?" "+o.join(" "):"")+i;r&&(u+=r+"</"+e+i);return u}function d(e){return"<![CDATA["+s(e)+"]]>"}var r=n("./base"),i=n("../utils"),s=i.escape,o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;t=e.exports=c;c.prototype=new r;c.prototype.constructor=c});e.register("runnable.js",function(e,t,n){function l(e,t){this.title=e;this.fn=t;this.async=t&&t.length;this.sync=!this.async;this._timeout=2e3;this.timedOut=!1}var r=n("browser/events").EventEmitter,i=n("browser/debug")("runnable"),s=global.Date,o=global.setTimeout,u=global.setInterval,a=global.clearTimeout,f=global.clearInterval;e.exports=l;l.prototype=new r;l.prototype.constructor=l;l.prototype.timeout=function(e){if(0==arguments.length)return this._timeout;i("timeout %d",e);this._timeout=e;this.timer&&this.resetTimeout();return this};l.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title};l.prototype.clearTimeout=function(){a(this.timer)};l.prototype.resetTimeout=function(){var e=this,t=this.timeout();this.clearTimeout();t&&(this.timer=o(function(){e.callback(new Error("timeout of "+t+"ms exceeded"));e.timedOut=!0},t))};l.prototype.run=function(e){function f(){if(a)return;a=!0;t.emit("error",new Error("done() called multiple times"))}function l(n){if(t.timedOut)return;if(u)return f();t.clearTimeout();t.duration=new s-r;u=!0;e(n)}var t=this,n=this.timeout(),r=new s,i=this.ctx,u,a;i&&i.runnable(this);this.async&&n&&(this.timer=o(function(){l(new Error("timeout of "+n+"ms exceeded"));t.timedOut=!0},n));this.callback=l;if(this.async){try{this.fn.call(i,function(e){if(e instanceof Error)return l(e);if(null!=e)return l(new Error("done() invoked with non-Error: "+e));l()})}catch(c){l(c)}return}try{this.pending||this.fn.call(i);this.duration=new s-r;e()}catch(c){e(c)}}});e.register("runner.js",function(e,t,n){function a(e){var t=this;this._globals=[];this.suite=e;this.total=e.total();this.failures=0;this.on("test end",function(e){t.checkGlobals(e)});this.on("hook end",function(e){t.checkGlobals(e)});this.grep(/.*/);this.globals(o.keys(global).concat(["errno"]))}var r=n("browser/events").EventEmitter,i=n("browser/debug")("runner"),s=n("./test"),o=n("./utils"),u=function(){};e.exports=a;a.prototype=new r;a.prototype.constructor=a;a.prototype.grep=function(e){i("grep %s",e);this._grep=e;this.total=this.grepTotal(this.suite);return this};a.prototype.grepTotal=function(e){var t=this,n=0;e.eachTest(function(e){t._grep.test(e.fullTitle())&&n++});return n};a.prototype.globals=function(e){if(0==arguments.length)return this._globals;i("globals %j",e);o.forEach(e,function(e){this._globals.push(e)},this);return this};a.prototype.checkGlobals=function(e){if(this.ignoreLeaks)return;var t=o.filter(o.keys(global),function(e){return!~o.indexOf(this._globals,e)&&(!global.navigator||"onerror"!==e)},this);this._globals=this._globals.concat(t);t.length>1?this.fail(e,new Error("global leaks detected: "+t.join(", ")+"")):t.length&&this.fail(e,new Error("global leak detected: "+t[0]))};a.prototype.fail=function(e,t){++this.failures;e.state="failed";"string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)'));this.emit("fail",e,t)};a.prototype.failHook=function(e,t){this.fail(e,t);this.emit("end")};a.prototype.hook=function(e,t){function u(e){var n=r[e];if(!n)return t();s.currentRunnable=n;s.emit("hook",n);n.on("error",function(e){s.failHook(n,e)});n.run(function(t){n.removeAllListeners("error");if(t)return s.failHook(n,t);s.emit("hook end",n);u(++e)})}var n=this.suite,r=n["_"+e],i=n._timeout,s=this,o;process.nextTick(function(){u(0)})};a.prototype.hooks=function(e,t,n){function s(o){r.suite=o;if(!o){r.suite=i;return n()}r.hook(e,function(e){if(e){r.suite=i;return n(e)}s(t.pop())})}var r=this,i=this.suite;s(t.pop())};a.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)};a.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)};a.prototype.parents=function(){var e=this.suite,t=[];while(e=e.parent)t.push(e);return t};a.prototype.runTest=function(e){var t=this.test,n=this;try{t.on("error",function(e){n.fail(t,e)});t.run(e)}catch(r){e(r)}};a.prototype.runTests=function(e,t){function s(o){if(n.failures&&e._bail)return t();i=r.shift();if(!i)return t();if(!n._grep.test(i.fullTitle()))return s();if(i.pending){n.emit("pending",i);n.emit("test end",i);return s()}n.emit("test",n.test=i);n.hookDown("beforeEach",function(){n.currentRunnable=n.test;n.runTest(function(e){i=n.test;if(e){n.fail(i,e);n.emit("test end",i);return n.hookUp("afterEach",s)}i.state="passed";n.emit("pass",i);n.emit("test end",i);n.hookUp("afterEach",s)})})}var n=this,r=e.tests,i;this.next=s;s()};a.prototype.runSuite=function(e,t){function o(){var t=e.suites[s++];if(!t)return u();r.runSuite(t,o)}function u(){r.suite=e;r.hook("afterAll",function(){r.emit("suite end",e);t()})}var n=this.grepTotal(e),r=this,s=0;i("run suite %s",e.fullTitle());if(!n)return t();this.emit("suite",this.suite=e);this.hook("beforeAll",function(){r.runTests(e,o)})};a.prototype.uncaught=function(e){i("uncaught exception");var t=this.currentRunnable;if("failed"==t.state)return;t.clearTimeout();e.uncaught=!0;this.fail(t,e);if("test"==t.type){this.emit("test end",t);this.hookUp("afterEach",this.next);return}this.emit("end")};a.prototype.run=function(e){var t=this,e=e||function(){};i("start");this.on("end",function(){i("end");process.removeListener("uncaughtException",this.uncaught);e(t.failures)});this.emit("start");this.runSuite(this.suite,function(){i("finished running");t.emit("end")});process.on("uncaughtException",function(e){t.uncaught(e)});return this}});e.register("suite.js",function(e,t,n){function u(e,t){this.title=e;this.ctx=t;this.suites=[];this.tests=[];this._beforeEach=[];this._beforeAll=[];this._afterEach=[];this._afterAll=[];this.root=!e;this._timeout=2e3;this._bail=!1}var r=n("browser/events").EventEmitter,i=n("browser/debug")("suite"),s=n("./utils"),o=n("./hook");t=e.exports=u;t.create=function(e,t){var n=new u(t,e.ctx);n.parent=e;t=n.fullTitle();e.addSuite(n);return n};u.prototype=new r;u.prototype.constructor=u;u.prototype.clone=function(){var e=new u(this.title);i("clone");e.ctx=this.ctx;e.timeout(this.timeout());e.bail(this.bail());return e};u.prototype.timeout=function(e){if(0==arguments.length)return this._timeout;String(e).match(/s$/)&&(e=parseFloat(e)*1e3);i("timeout %d",e);this._timeout=parseInt(e,10);return this};u.prototype.bail=function(e){if(0==arguments.length)return this._bail;i("bail %s",e);this._bail=e;return this};u.prototype.beforeAll=function(e){var t=new o('"before all" hook',e);t.parent=this;t.timeout(this.timeout());t.ctx=this.ctx;this._beforeAll.push(t);this.emit("beforeAll",t);return this};u.prototype.afterAll=function(e){var t=new o('"after all" hook',e);t.parent=this;t.timeout(this.timeout());t.ctx=this.ctx;this._afterAll.push(t);this.emit("afterAll",t);return this};u.prototype.beforeEach=function(e){var t=new o('"before each" hook',e);t.parent=this;t.timeout(this.timeout());t.ctx=this.ctx;this._beforeEach.push(t);this.emit("beforeEach",t);return this};u.prototype.afterEach=function(e){var t=new o('"after each" hook',e);t.parent=this;t.timeout(this.timeout());t.ctx=this.ctx;this._afterEach.push(t);this.emit("afterEach",t);return this};u.prototype.addSuite=function(e){e.parent=this;e.timeout(this.timeout());e.bail(this.bail());this.suites.push(e);this.emit("suite",e);return this};u.prototype.addTest=function(e){e.parent=this;e.timeout(this.timeout());e.ctx=this.ctx;this.tests.push(e);this.emit("test",e);return this};u.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title};u.prototype.total=function(){return s.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length};u.prototype.eachTest=function(e){s.forEach(this.tests,e);s.forEach(this.suites,function(t){t.eachTest
(e)});return this}});e.register("test.js",function(e,t,n){function i(e,t){r.call(this,e,t);this.pending=!t;this.type="test"}var r=n("./runnable");e.exports=i;i.prototype=new r;i.prototype.constructor=i;i.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_"==e[0]?undefined:"parent"==e?"#<Suite>":t},2)}});e.register("utils.js",function(e,t,n){function a(e){return!~u.indexOf(e)}var r=n("browser/fs"),i=n("browser/path"),s=i.join,o=n("browser/debug")("watch"),u=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};t.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)};t.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1};t.reduce=function(e,t,n,r){var i=n;for(var s=0,o=e.length;s<o;s++)i=t.call(r,i,e[s],s,e);return i};t.filter=function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];t.call(n,o,i,e)&&r.push(o)}return r};t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t};t.watch=function(e,t){var n={interval:100};e.forEach(function(e){o("file %s",e);r.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})};t.files=function(e,n){n=n||[];r.readdirSync(e).filter(a).forEach(function(i){i=s(e,i);r.statSync(i).isDirectory()?t.files(i,n):i.match(/\.(js|coffee)$/)&&n.push(i)});return n};t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")}});process={};process.exit=function(e){};process.stdout={};global=window;process.nextTick=function(){if(window.ActiveXObject||!window.postMessage)return function(e){e()};var e=[],t="mocha-zero-timeout";window.addEventListener("message",function(n){if(n.source==window&&n.data==t){n.stopPropagation&&n.stopPropagation();e.length&&e.shift()()}},!0);return function(n){e.push(n);window.postMessage(t,"*")}}();process.removeListener=function(e){"uncaughtException"==e&&(window.onerror=null)};process.on=function(e,t){"uncaughtException"==e&&(window.onerror=t)};window.mocha=e("mocha");(function(){function r(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}function i(){var e=document.getElementsByTagName("code");for(var t=0,n=e.length;t<n;++t)e[t].innerHTML=r(e[t].innerHTML)}function s(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);e[r]=decodeURIComponent(i);return e},{})}var e=new mocha.Suite("",new mocha.Context),t=mocha.utils,n={};mocha.setup=function(t){"string"==typeof t?n.ui=t:n=t;ui=mocha.interfaces[n.ui];if(!ui)throw new Error('invalid mocha interface "'+ui+'"');n.timeout&&e.timeout(n.timeout);ui(e);e.emit("pre-require",window)};mocha.run=function(t){e.emit("run");var r=new mocha.Runner(e),o=n.reporter||mocha.reporters.HTML,u=new o(r),a=s(window.location.search||"");a.grep&&r.grep(new RegExp(a.grep));n.ignoreLeaks&&(r.ignoreLeaks=!0);n.globals&&r.globals(n.globals);r.globals(["location"]);r.on("end",i);return r.run(t)}})()})();