"use strict";function createFiles(e,t){for(var n=0;n<e;n++)grunt.file.write(path.join(t,"test-"+n+".js"),"var test = "+n+";")}var gaze=require("../lib/gaze"),grunt=require("grunt"),path=require("path"),watchDir=path.resolve(__dirname,"watch");module.exports={setUp:function(e){grunt.file.exists(watchDir)&&grunt.file.delete(watchDir,{force:!0});createFiles(100,path.join(watchDir,"one"));createFiles(100,path.join(watchDir,"two"));createFiles(100,path.join(watchDir,"three"));createFiles(100,path.join(watchDir,"three","four"));createFiles(100,path.join(watchDir,"three","four","five","six"));process.chdir(watchDir);e()},tearDown:function(e){grunt.file.exists(watchDir)&&grunt.file.delete(watchDir,{force:!0});e()},changed:function(e){gaze("**/*",{maxListeners:0},function(t,n){this.on("changed",e);setTimeout(function(){var e=String((new Date).getTime()).replace(/[^\w]+/g,"");grunt.file.write(path.join(watchDir,"one","test-99.js"),'var test = "'+e+'"')},100)})}};